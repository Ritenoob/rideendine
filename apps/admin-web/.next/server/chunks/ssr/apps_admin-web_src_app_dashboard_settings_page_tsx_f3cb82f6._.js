module.exports=[87150,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3112),e=a.i(10528),f=a.i(32258),g=a.i(5770);let h=(0,g.default)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var i=a.i(30598),j=a.i(46129),k=a.i(95725);let l=(0,g.default)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var m=a.i(63142),n=a.i(96977),o=a.i(82401);let p={chef_commission_rate:15,driver_commission_rate:85,platform_fee_rate:0,tax_rate:13,min_delivery_fee:299,max_delivery_fee:999,base_delivery_fee:299,per_km_rate:50,max_delivery_radius_km:15,min_order_amount:1500,max_prep_time_minutes:60,order_timeout_minutes:5,min_driver_rating:4,max_concurrent_deliveries:3,maintenance_mode:!1,new_registrations_enabled:!0};function q(){let[a,g]=(0,c.useState)(p),[q,r]=(0,c.useState)(p),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1);(0,c.useEffect)(()=>{A()},[]),(0,c.useEffect)(()=>{z(JSON.stringify(a)!==JSON.stringify(q))},[a,q]);let A=async()=>{t(!0);try{let a=await d.api.getSettings();g(a.settings),r(a.settings)}catch(a){console.error("Failed to fetch settings:",a),g(p),r(p)}finally{t(!1)}},B=async()=>{v(!0),x(!1);try{await d.api.updateSettings(a),r(a),x(!0),setTimeout(()=>x(!1),3e3)}catch(a){console.error("Failed to save settings:",a),alert("Failed to save settings. Please try again.")}finally{v(!1)}},C=(a,b)=>{g(c=>({...c,[a]:b}))};return s?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-pulse text-muted",children:"Loading settings..."})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-ink",children:"Platform Settings"}),(0,b.jsx)("p",{className:"text-muted text-sm",children:"Configure platform-wide settings"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[y&&(0,b.jsxs)("button",{type:"button",onClick:()=>{confirm("Are you sure you want to discard all changes?")&&g(q)},className:"btn-secondary flex items-center gap-2",children:[(0,b.jsx)(o.RotateCcw,{className:"w-4 h-4"}),"Discard Changes"]}),(0,b.jsxs)("button",{type:"button",onClick:B,disabled:u||!y,className:"btn-primary flex items-center gap-2",children:[(0,b.jsx)(l,{className:"w-4 h-4"}),u?"Saving...":w?"Saved!":"Save Changes"]})]})]}),w&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-4 rounded-xl bg-emerald-50 text-emerald-700",children:[(0,b.jsx)(n.CheckCircle,{className:"w-5 h-5"}),"Settings saved successfully!"]}),y&&!w&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-4 rounded-xl bg-amber-50 text-amber-700",children:[(0,b.jsx)(m.AlertCircle,{className:"w-5 h-5"}),"You have unsaved changes."]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"card",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-emerald-100 flex items-center justify-center",children:(0,b.jsx)(h,{className:"w-5 h-5 text-emerald-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-ink",children:"Commission Rates"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Set commission percentages"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Chef Commission Rate (%)"}),(0,b.jsx)("input",{type:"number",value:a.chef_commission_rate,onChange:a=>C("chef_commission_rate",Number(a.target.value)),min:0,max:100,className:"input"}),(0,b.jsxs)("p",{className:"text-xs text-muted mt-1",children:["Platform takes ",a.chef_commission_rate,"% from chef earnings"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Driver Earnings Rate (%)"}),(0,b.jsx)("input",{type:"number",value:a.driver_commission_rate,onChange:a=>C("driver_commission_rate",Number(a.target.value)),min:0,max:100,className:"input"}),(0,b.jsxs)("p",{className:"text-xs text-muted mt-1",children:["Drivers receive ",a.driver_commission_rate,"% of delivery fees"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Tax Rate (%)"}),(0,b.jsx)("input",{type:"number",value:a.tax_rate,onChange:a=>C("tax_rate",Number(a.target.value)),min:0,max:100,step:"0.1",className:"input"}),(0,b.jsxs)("p",{className:"text-xs text-muted mt-1",children:["Applied to order subtotals (currently ",a.tax_rate,"%)"]})]})]})]}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center",children:(0,b.jsx)(j.MapPin,{className:"w-5 h-5 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-ink",children:"Delivery Settings"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Configure delivery fees"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Min Delivery Fee"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.DollarSign,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted"}),(0,b.jsx)("input",{type:"number",value:(a.min_delivery_fee/100).toFixed(2),onChange:a=>C("min_delivery_fee",Math.round(100*Number(a.target.value))),step:"0.01",className:"input pl-8"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Max Delivery Fee"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.DollarSign,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted"}),(0,b.jsx)("input",{type:"number",value:(a.max_delivery_fee/100).toFixed(2),onChange:a=>C("max_delivery_fee",Math.round(100*Number(a.target.value))),step:"0.01",className:"input pl-8"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Base Delivery Fee"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.DollarSign,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted"}),(0,b.jsx)("input",{type:"number",value:(a.base_delivery_fee/100).toFixed(2),onChange:a=>C("base_delivery_fee",Math.round(100*Number(a.target.value))),step:"0.01",className:"input pl-8"})]}),(0,b.jsx)("p",{className:"text-xs text-muted mt-1",children:"Starting fee before distance calculation"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Per KM Rate (cents)"}),(0,b.jsx)("input",{type:"number",value:a.per_km_rate,onChange:a=>C("per_km_rate",Number(a.target.value)),className:"input"}),(0,b.jsxs)("p",{className:"text-xs text-muted mt-1",children:["$",(a.per_km_rate/100).toFixed(2)," per kilometer"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Max Delivery Radius (km)"}),(0,b.jsx)("input",{type:"number",value:a.max_delivery_radius_km,onChange:a=>C("max_delivery_radius_km",Number(a.target.value)),className:"input"}),(0,b.jsx)("p",{className:"text-xs text-muted mt-1",children:"Maximum distance for deliveries"})]})]})]}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-purple-100 flex items-center justify-center",children:(0,b.jsx)(i.Clock,{className:"w-5 h-5 text-purple-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-ink",children:"Order Settings"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Configure order parameters"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Minimum Order Amount"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.DollarSign,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted"}),(0,b.jsx)("input",{type:"number",value:(a.min_order_amount/100).toFixed(2),onChange:a=>C("min_order_amount",Math.round(100*Number(a.target.value))),step:"0.01",className:"input pl-8"})]}),(0,b.jsxs)("p",{className:"text-xs text-muted mt-1",children:["Customers must order at least $",(a.min_order_amount/100).toFixed(2)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Max Prep Time (minutes)"}),(0,b.jsx)("input",{type:"number",value:a.max_prep_time_minutes,onChange:a=>C("max_prep_time_minutes",Number(a.target.value)),className:"input"}),(0,b.jsx)("p",{className:"text-xs text-muted mt-1",children:"Maximum preparation time allowed for orders"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Order Timeout (minutes)"}),(0,b.jsx)("input",{type:"number",value:a.order_timeout_minutes,onChange:a=>C("order_timeout_minutes",Number(a.target.value)),className:"input"}),(0,b.jsx)("p",{className:"text-xs text-muted mt-1",children:"Time for chef to accept before auto-cancel"})]})]})]}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-amber-100 flex items-center justify-center",children:(0,b.jsx)(e.Settings,{className:"w-5 h-5 text-amber-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-ink",children:"Driver Settings"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Configure driver parameters"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Minimum Driver Rating"}),(0,b.jsx)("input",{type:"number",value:a.min_driver_rating,onChange:a=>C("min_driver_rating",Number(a.target.value)),min:0,max:5,step:"0.1",className:"input"}),(0,b.jsx)("p",{className:"text-xs text-muted mt-1",children:"Drivers below this rating are deactivated"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Max Concurrent Deliveries"}),(0,b.jsx)("input",{type:"number",value:a.max_concurrent_deliveries,onChange:a=>C("max_concurrent_deliveries",Number(a.target.value)),min:1,max:10,className:"input"}),(0,b.jsx)("p",{className:"text-xs text-muted mt-1",children:"Maximum orders a driver can handle at once"})]})]})]}),(0,b.jsxs)("div",{className:"card lg:col-span-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-red-100 flex items-center justify-center",children:(0,b.jsx)(k.Shield,{className:"w-5 h-5 text-red-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-ink",children:"Platform Status"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Control platform operations"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-ink",children:"Maintenance Mode"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Disable all platform operations"})]}),(0,b.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.maintenance_mode,onChange:a=>C("maintenance_mode",a.target.checked),className:"sr-only peer"}),(0,b.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:ring-2 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-500"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-ink",children:"New Registrations"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Allow new chef/driver signups"})]}),(0,b.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.new_registrations_enabled,onChange:a=>C("new_registrations_enabled",a.target.checked),className:"sr-only peer"}),(0,b.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:ring-2 peer-focus:ring-accent/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})]})]}),a.maintenance_mode&&(0,b.jsxs)("div",{className:"mt-4 p-4 bg-red-50 rounded-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,b.jsx)(m.AlertCircle,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"font-medium",children:"Warning: Maintenance mode is enabled"})]}),(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"The platform is currently in maintenance mode. All operations are disabled for users."})]})]})]})]})}a.s(["default",()=>q],87150)}];

//# sourceMappingURL=apps_admin-web_src_app_dashboard_settings_page_tsx_f3cb82f6._.js.map