module.exports=[64601,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3112),e=a.i(76076),f=a.i(47589),g=a.i(62903);let h=(0,a.i(5770).default)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var i=a.i(96977),j=a.i(69546),k=a.i(94940),l=a.i(77257),m=a.i(34528),n=a.i(97094),o=a.i(546),p=a.i(33163),q=a.i(42722),r=a.i(32258),s=a.i(46129),t=a.i(95725);function u(){let a,[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)("all"),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(1),[E,F]=(0,c.useState)(0),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1);(0,c.useEffect)(()=>{M()},[y,C]);let M=async()=>{x(!0);try{let a=await d.api.getUsers({role:"all"===y?void 0:y,search:A||void 0,page:C});v(a.users),F(a.total)}catch(a){console.error("Failed to fetch users:",a),v([{id:"1",email:"john@example.com",phone:"+1 234-567-8900",first_name:"John",last_name:"Doe",role:"customer",is_active:!0,created_at:"2024-01-15T10:00:00Z",total_orders:12,total_spent:34500,address:"123 Main St, Hamilton, ON",last_login:"2024-01-20T14:30:00Z"},{id:"2",email:"maria@example.com",phone:"+1 234-567-8901",first_name:"Maria",last_name:"Garcia",role:"chef",is_active:!0,created_at:"2024-01-10T10:00:00Z",total_orders:156,address:"456 Oak Ave, Burlington, ON",last_login:"2024-01-20T09:15:00Z"},{id:"3",email:"david@example.com",phone:"+1 234-567-8902",first_name:"David",last_name:"Chen",role:"driver",is_active:!0,created_at:"2024-01-12T10:00:00Z",total_orders:245,address:"789 Pine Rd, Oakville, ON",last_login:"2024-01-20T12:45:00Z"},{id:"4",email:"suspended@example.com",phone:"+1 234-567-8903",first_name:"Sarah",last_name:"Wilson",role:"customer",is_active:!1,created_at:"2024-01-05T10:00:00Z",total_orders:3,total_spent:8500,address:"321 Elm St, Toronto, ON",last_login:"2024-01-10T16:20:00Z"},{id:"5",email:"admin@ridendine.com",phone:"+1 234-567-8904",first_name:"Admin",last_name:"User",role:"admin",is_active:!0,created_at:"2023-12-01T10:00:00Z",last_login:"2024-01-20T08:00:00Z"}]),F(250)}finally{x(!1)}},N=()=>{D(1),M()},O=async a=>{if(confirm("Are you sure you want to suspend this user?")){L(!0);try{await d.api.suspendUser(a),M()}catch(a){console.error("Failed to suspend user:",a)}finally{L(!1)}}},P=async a=>{if(confirm("Are you sure you want to activate this user?")){L(!0);try{await d.api.activateUser(a),M()}catch(a){console.error("Failed to activate user:",a)}finally{L(!1)}}},Q=u.filter(a=>{if(!A)return!0;let b=A.toLowerCase();return a.email.toLowerCase().includes(b)||`${a.first_name} ${a.last_name}`.toLowerCase().includes(b)}),R=a=>{switch(a){case"chef":return(0,b.jsx)(m.ChefHat,{className:"w-4 h-4"});case"driver":return(0,b.jsx)(n.Truck,{className:"w-4 h-4"});case"admin":return(0,b.jsx)(t.Shield,{className:"w-4 h-4"});default:return(0,b.jsx)(o.User,{className:"w-4 h-4"})}},S=a=>{switch(a){case"chef":return"bg-orange-100 text-orange-700";case"driver":return"bg-purple-100 text-purple-700";case"admin":return"bg-red-100 text-red-700";default:return"bg-blue-100 text-blue-700"}},T=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-ink",children:"User Management"}),(0,b.jsx)("p",{className:"text-muted text-sm",children:"View and manage all platform users"})]}),(0,b.jsxs)("div",{className:"text-sm text-muted",children:[E.toLocaleString()," total users"]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted"}),(0,b.jsx)("input",{type:"text",value:A,onChange:a=>B(a.target.value),onKeyDown:a=>"Enter"===a.key&&N(),placeholder:"Search by name or email...",className:"input pl-10"})]}),(0,b.jsxs)("select",{value:y,onChange:a=>{z(a.target.value),D(1)},className:"input w-full sm:w-48","aria-label":"Filter by role",children:[(0,b.jsx)("option",{value:"all",children:"All Roles"}),(0,b.jsx)("option",{value:"customer",children:"Customers"}),(0,b.jsx)("option",{value:"chef",children:"Chefs"}),(0,b.jsx)("option",{value:"driver",children:"Drivers"}),(0,b.jsx)("option",{value:"admin",children:"Admins"})]}),(0,b.jsx)("button",{type:"button",onClick:N,className:"btn-primary",children:"Search"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)("div",{className:"card",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center",children:(0,b.jsx)(o.User,{className:"w-5 h-5 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-ink",children:u.filter(a=>"customer"===a.role).length}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Customers"})]})]})}),(0,b.jsx)("div",{className:"card",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-orange-100 flex items-center justify-center",children:(0,b.jsx)(m.ChefHat,{className:"w-5 h-5 text-orange-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-ink",children:u.filter(a=>"chef"===a.role).length}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Chefs"})]})]})}),(0,b.jsx)("div",{className:"card",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-purple-100 flex items-center justify-center",children:(0,b.jsx)(n.Truck,{className:"w-5 h-5 text-purple-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-ink",children:u.filter(a=>"driver"===a.role).length}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Drivers"})]})]})}),(0,b.jsx)("div",{className:"card",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gray-100 flex items-center justify-center",children:(0,b.jsx)(e.Users,{className:"w-5 h-5 text-gray-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-ink",children:u.length}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Total Shown"})]})]})})]}),(0,b.jsxs)("div",{className:"card",children:[w?(0,b.jsx)("div",{className:"text-center py-12 text-muted",children:"Loading..."}):0===Q.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(e.Users,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),(0,b.jsx)("p",{className:"text-muted",children:"No users found"})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-50",children:[(0,b.jsx)("th",{className:"table-header",children:"User"}),(0,b.jsx)("th",{className:"table-header",children:"Contact"}),(0,b.jsx)("th",{className:"table-header",children:"Role"}),(0,b.jsx)("th",{className:"table-header",children:"Status"}),(0,b.jsx)("th",{className:"table-header",children:"Created"}),(0,b.jsx)("th",{className:"table-header",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:Q.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"w-10 h-10 rounded-xl bg-gray-100 flex items-center justify-center font-semibold text-muted",children:[a.first_name[0],a.last_name[0]]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-medium text-ink",children:[a.first_name," ",a.last_name]}),(0,b.jsx)("p",{className:"text-xs text-muted",children:a.email})]})]})}),(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted",children:[(0,b.jsx)(j.Mail,{className:"w-3 h-3"}),a.email]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted",children:[(0,b.jsx)(k.Phone,{className:"w-3 h-3"}),a.phone]})]})}),(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold ${S(a.role)}`,children:[R(a.role),a.role]})}),(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsx)("span",{className:`badge ${a.is_active?"badge-approved":"badge-rejected"}`,children:a.is_active?"Active":"Suspended"})}),(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted",children:[(0,b.jsx)(l.Calendar,{className:"w-3 h-3"}),T(a.created_at)]})}),(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{H(a),J(!0)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"View Profile",children:(0,b.jsx)(g.Eye,{className:"w-4 h-4 text-muted"})}),"admin"!==a.role&&(0,b.jsx)(b.Fragment,{children:a.is_active?(0,b.jsx)("button",{type:"button",onClick:()=>O(a.id),disabled:K,className:"p-2 hover:bg-red-100 rounded-lg transition-colors",title:"Suspend User",children:(0,b.jsx)(h,{className:"w-4 h-4 text-red-600"})}):(0,b.jsx)("button",{type:"button",onClick:()=>P(a.id),disabled:K,className:"p-2 hover:bg-emerald-100 rounded-lg transition-colors",title:"Activate User",children:(0,b.jsx)(i.CheckCircle,{className:"w-4 h-4 text-emerald-600"})})})]})})]},a.id))})]})}),E>20&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-100",children:[(0,b.jsxs)("p",{className:"text-sm text-muted",children:["Showing ",(C-1)*20+1," - ",Math.min(20*C,E)," of"," ",E]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>D(a=>Math.max(1,a-1)),disabled:1===C,className:"btn-secondary text-sm",children:"Previous"}),(0,b.jsx)("button",{type:"button",onClick:()=>D(a=>a+1),disabled:20*C>=E,className:"btn-secondary text-sm",children:"Next"})]})]})]}),I&&G&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-100 p-6 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"w-14 h-14 rounded-xl bg-gray-100 flex items-center justify-center text-xl font-bold text-muted",children:[G.first_name[0],G.last_name[0]]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-xl font-bold text-ink",children:[G.first_name," ",G.last_name]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-lg text-xs font-semibold ${S(G.role)}`,children:[R(G.role),G.role]}),(0,b.jsx)("span",{className:`badge text-xs ${G.is_active?"badge-approved":"badge-rejected"}`,children:G.is_active?"Active":"Suspended"})]})]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{J(!1),H(null)},className:"p-2 hover:bg-gray-100 rounded-lg",title:"Close modal",children:(0,b.jsx)(p.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold text-ink mb-3",children:"Contact Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl",children:[(0,b.jsx)(j.Mail,{className:"w-5 h-5 text-muted"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted",children:"Email"}),(0,b.jsx)("p",{className:"font-medium",children:G.email})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl",children:[(0,b.jsx)(k.Phone,{className:"w-5 h-5 text-muted"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted",children:"Phone"}),(0,b.jsx)("p",{className:"font-medium",children:G.phone})]})]}),G.address&&(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl md:col-span-2",children:[(0,b.jsx)(s.MapPin,{className:"w-5 h-5 text-muted"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted",children:"Address"}),(0,b.jsx)("p",{className:"font-medium",children:G.address})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold text-ink mb-3",children:"Activity"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[void 0!==G.total_orders&&(0,b.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl text-center",children:[(0,b.jsx)(q.ShoppingBag,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:G.total_orders}),(0,b.jsx)("p",{className:"text-xs text-blue-600",children:"customer"===G.role?"Orders Placed":"Orders Completed"})]}),void 0!==G.total_spent&&(0,b.jsxs)("div",{className:"p-4 bg-emerald-50 rounded-xl text-center",children:[(0,b.jsx)(r.DollarSign,{className:"w-6 h-6 text-emerald-600 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-emerald-700",children:(a=G.total_spent,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a/100))}),(0,b.jsx)("p",{className:"text-xs text-emerald-600",children:"Total Spent"})]}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-xl text-center",children:[(0,b.jsx)(l.Calendar,{className:"w-6 h-6 text-gray-600 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:T(G.created_at)}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Joined"})]}),G.last_login&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-xl text-center",children:[(0,b.jsx)(o.User,{className:"w-6 h-6 text-gray-600 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:new Date(G.last_login).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Last Login"})]})]})]}),"admin"!==G.role&&(0,b.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,b.jsx)("h4",{className:"font-semibold text-ink mb-3",children:"Actions"}),(0,b.jsx)("div",{className:"flex gap-3",children:G.is_active?(0,b.jsxs)("button",{type:"button",onClick:()=>{O(G.id),J(!1)},disabled:K,className:"btn-danger flex items-center gap-2",children:[(0,b.jsx)(h,{className:"w-4 h-4"}),"Suspend User"]}):(0,b.jsxs)("button",{type:"button",onClick:()=>{P(G.id),J(!1)},disabled:K,className:"btn-primary flex items-center gap-2",children:[(0,b.jsx)(i.CheckCircle,{className:"w-4 h-4"}),"Activate User"]})})]})]})]})})]})}a.s(["default",()=>u],64601)}];

//# sourceMappingURL=apps_admin-web_src_app_dashboard_users_page_tsx_84c3c433._.js.map