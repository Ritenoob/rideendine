module.exports=[33163,a=>{"use strict";let b=(0,a.i(5770).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33163)},47589,a=>{"use strict";let b=(0,a.i(5770).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],47589)},546,a=>{"use strict";let b=(0,a.i(5770).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],546)},60723,a=>{"use strict";let b=(0,a.i(5770).default)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>b],60723)},56888,a=>{"use strict";let b=(0,a.i(5770).default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);a.s(["MessageSquare",()=>b],56888)},6025,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3112),e=a.i(26108),f=a.i(5770);let g=(0,f.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),h=(0,f.default)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),i=(0,f.default)("FlagOff",[["path",{d:"M8 2c3 0 5 2 8 2s4-1 4-1v11",key:"9rwyz9"}],["path",{d:"M4 22V4",key:"1plyxx"}],["path",{d:"M4 15s1-1 4-1 5 2 8 2",key:"1myooe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var j=a.i(34528),k=a.i(97094),l=a.i(546),m=a.i(56888),n=a.i(33163),o=a.i(60723),p=a.i(47589);function q(){let[a,f]=(0,c.useState)([]),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)("all"),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1);(0,c.useEffect)(()=>{G()},[s,u]);let G=async()=>{r(!0);try{let a=await d.api.getReviews({type:"all"===s?void 0:s,flagged:u||void 0});f(a.reviews)}catch(a){console.error("Failed to fetch reviews:",a),f([{id:"1",order_id:"RND-2024-001234",reviewer_name:"John Doe",reviewee_type:"chef",reviewee_name:"Maria's Kitchen",rating:5,comment:"Amazing food! The pasta was perfectly cooked and the sauce was incredible. Will definitely order again!",is_flagged:!1,created_at:"2024-01-20T14:00:00Z"},{id:"2",order_id:"RND-2024-001235",reviewer_name:"Sarah Johnson",reviewee_type:"driver",reviewee_name:"David Chen",rating:4,comment:"Quick delivery, very professional. Food was still hot when it arrived.",is_flagged:!1,created_at:"2024-01-20T13:00:00Z"},{id:"3",order_id:"RND-2024-001236",reviewer_name:"Mike Wilson",reviewee_type:"chef",reviewee_name:"Chen's Dumplings",rating:2,comment:"Very disappointed. The order was wrong and when I tried to contact them they were rude.",is_flagged:!0,created_at:"2024-01-19T18:00:00Z"},{id:"4",order_id:"RND-2024-001237",reviewer_name:"Emily Brown",reviewee_type:"driver",reviewee_name:"Tom Wilson",rating:1,comment:"Driver was very late and food was cold. Terrible experience!",is_flagged:!0,created_at:"2024-01-19T16:00:00Z"},{id:"5",order_id:"RND-2024-001238",reviewer_name:"Alex Turner",reviewee_type:"chef",reviewee_name:"Soul Food by James",rating:5,comment:"Best fried chicken I have ever had! Absolutely amazing.",is_flagged:!1,created_at:"2024-01-18T12:00:00Z"}])}finally{r(!1)}},H=async()=>{if(y&&A){F(!0);try{await d.api.removeReview(y.id,A),D(!1),B(""),z(null),G()}catch(a){console.error("Failed to delete review:",a)}finally{F(!1)}}},I=async a=>{F(!0);try{a.is_flagged?await d.api.unflagReview(a.id):await d.api.flagReview(a.id),f(b=>b.map(b=>b.id===a.id?{...b,is_flagged:!b.is_flagged}:b))}catch(b){console.error("Failed to update flag status:",b),f(b=>b.map(b=>b.id===a.id?{...b,is_flagged:!b.is_flagged}:b))}finally{F(!1)}},J=a=>(0,b.jsx)("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(c=>(0,b.jsx)(e.Star,{className:`w-4 h-4 ${c<=a?"text-amber-400 fill-amber-400":"text-gray-300"}`},c))}),K=a.filter(a=>{if(!w)return!0;let b=w.toLowerCase();return a.reviewer_name.toLowerCase().includes(b)||a.reviewee_name.toLowerCase().includes(b)||a.comment.toLowerCase().includes(b)||a.order_id.toLowerCase().includes(b)}),L=K.length>0?K.reduce((a,b)=>a+b.rating,0)/K.length:0,M=[5,4,3,2,1].map(a=>({rating:a,count:K.filter(b=>b.rating===a).length,percentage:K.length>0?K.filter(b=>b.rating===a).length/K.length*100:0}));return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-ink",children:"Review Management"}),(0,b.jsx)("p",{className:"text-muted text-sm",children:"Moderate and manage user reviews"})]}),(0,b.jsxs)("div",{className:"text-sm text-muted",children:[K.length," reviews"]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted"}),(0,b.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value),placeholder:"Search reviews...",className:"input pl-10"})]}),(0,b.jsxs)("select",{value:s,onChange:a=>t(a.target.value),className:"input w-full sm:w-48",title:"Filter by review type","aria-label":"Filter by review type",children:[(0,b.jsx)("option",{value:"all",children:"All Reviews"}),(0,b.jsx)("option",{value:"chef",children:"Chef Reviews"}),(0,b.jsx)("option",{value:"driver",children:"Driver Reviews"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer bg-white border border-gray-200 rounded-xl px-4 py-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:u,onChange:a=>v(a.target.checked),className:"w-4 h-4 rounded accent-red-500"}),(0,b.jsx)(h,{className:"w-4 h-4 text-red-500"}),(0,b.jsx)("span",{className:"text-sm",children:"Flagged only"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"card",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Average Rating"}),(0,b.jsx)(e.Star,{className:"w-5 h-5 text-amber-400 fill-amber-400"})]}),(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("span",{className:"text-4xl font-bold text-ink",children:L.toFixed(1)}),(0,b.jsx)("span",{className:"text-muted",children:"/ 5.0"})]}),(0,b.jsxs)("p",{className:"text-sm text-muted mt-2",children:["Based on ",K.length," reviews"]})]}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"Rating Distribution"}),(0,b.jsx)("div",{className:"space-y-2",children:M.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm w-8",children:a.rating}),(0,b.jsx)(e.Star,{className:"w-3 h-3 text-amber-400 fill-amber-400"}),(0,b.jsx)("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-amber-400 rounded-full transition-all",style:{width:`${a.percentage}%`}})}),(0,b.jsx)("span",{className:"text-xs text-muted w-8",children:a.count})]},a.rating))})]}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"Review Stats"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.ChefHat,{className:"w-4 h-4 text-orange-500"}),(0,b.jsx)("span",{className:"text-sm",children:"Chef Reviews"})]}),(0,b.jsx)("span",{className:"font-semibold",children:K.filter(a=>"chef"===a.reviewee_type).length})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Truck,{className:"w-4 h-4 text-purple-500"}),(0,b.jsx)("span",{className:"text-sm",children:"Driver Reviews"})]}),(0,b.jsx)("span",{className:"font-semibold",children:K.filter(a=>"driver"===a.reviewee_type).length})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h,{className:"w-4 h-4 text-red-500"}),(0,b.jsx)("span",{className:"text-sm",children:"Flagged"})]}),(0,b.jsx)("span",{className:"font-semibold text-red-600",children:K.filter(a=>a.is_flagged).length})]})]})]})]}),(0,b.jsx)("div",{className:"card",children:q?(0,b.jsx)("div",{className:"text-center py-12 text-muted",children:"Loading..."}):0===K.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(m.MessageSquare,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),(0,b.jsx)("p",{className:"text-muted",children:"No reviews found"})]}):(0,b.jsx)("div",{className:"space-y-4",children:K.map(a=>(0,b.jsxs)("div",{className:`p-4 rounded-xl border ${a.is_flagged?"border-red-200 bg-red-50":"border-gray-100 bg-gray-50"}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gray-200 flex items-center justify-center",children:(0,b.jsx)(l.User,{className:"w-5 h-5 text-gray-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-ink",children:a.reviewer_name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted",children:[(0,b.jsxs)("span",{children:["Order: ",a.order_id]}),(0,b.jsx)("span",{children:"-"}),(0,b.jsx)("span",{children:new Date(a.created_at).toLocaleDateString()})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.is_flagged&&(0,b.jsxs)("span",{className:"badge badge-rejected flex items-center gap-1",children:[(0,b.jsx)(h,{className:"w-3 h-3"}),"Flagged"]}),(0,b.jsx)("button",{type:"button",onClick:()=>I(a),disabled:E,className:`p-2 rounded-lg transition-colors ${a.is_flagged?"hover:bg-emerald-100 text-emerald-600":"hover:bg-amber-100 text-amber-600"}`,title:a.is_flagged?"Unflag Review":"Flag Review",children:a.is_flagged?(0,b.jsx)(i,{className:"w-4 h-4"}):(0,b.jsx)(h,{className:"w-4 h-4"})}),(0,b.jsx)("button",{type:"button",onClick:()=>{z(a),D(!0)},className:"p-2 hover:bg-red-100 rounded-lg transition-colors",title:"Remove Review",children:(0,b.jsx)(g,{className:"w-4 h-4 text-red-600"})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["chef"===a.reviewee_type?(0,b.jsx)(j.ChefHat,{className:"w-4 h-4 text-orange-500"}):(0,b.jsx)(k.Truck,{className:"w-4 h-4 text-purple-500"}),(0,b.jsx)("span",{className:"font-medium",children:a.reviewee_name})]}),J(a.rating),(0,b.jsxs)("span",{className:"text-sm text-muted",children:["(",a.rating,"/5)"]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:a.comment})]},a.id))})}),C&&y&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-red-100 flex items-center justify-center",children:(0,b.jsx)(o.AlertTriangle,{className:"w-5 h-5 text-red-600"})}),(0,b.jsx)("h3",{className:"text-lg font-bold text-ink",children:"Remove Review"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{D(!1),B(""),z(null)},className:"p-1 hover:bg-gray-100 rounded-lg",title:"Close modal","aria-label":"Close modal",children:(0,b.jsx)(n.X,{className:"w-5 h-5"})})]}),(0,b.jsx)("p",{className:"text-sm text-muted mb-4",children:"This review will be permanently removed and the reviewer will be notified."}),(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[J(y.rating),(0,b.jsxs)("span",{className:"text-sm text-muted",children:["by ",y.reviewer_name]})]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["“",y.comment,"”"]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Reason for removal"}),(0,b.jsx)("textarea",{value:A,onChange:a=>B(a.target.value),placeholder:"Enter the reason for removing this review...",rows:3,className:"input"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{D(!1),B(""),z(null)},className:"flex-1 btn-secondary",children:"Cancel"}),(0,b.jsxs)("button",{type:"button",onClick:H,disabled:!A||E,className:"flex-1 btn-danger flex items-center justify-center gap-2",children:[(0,b.jsx)(g,{className:"w-4 h-4"}),E?"Removing...":"Remove Review"]})]})]})})]})}a.s(["default",()=>q],6025)}];

//# sourceMappingURL=apps_admin-web_b79e1829._.js.map