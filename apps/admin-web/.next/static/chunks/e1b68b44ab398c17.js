(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48470,e=>{"use strict";let s=(0,e.i(77453).default)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>s],48470)},74763,e=>{"use strict";let s=(0,e.i(77453).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],74763)},53638,e=>{"use strict";let s=(0,e.i(77453).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>s],53638)},30800,e=>{"use strict";let s=(0,e.i(77453).default)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>s],30800)},95511,e=>{"use strict";let s=(0,e.i(77453).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],95511)},92309,e=>{"use strict";let s=(0,e.i(77453).default)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>s],92309)},62380,e=>{"use strict";let s=(0,e.i(77453).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>s],62380)},37164,e=>{"use strict";let s=(0,e.i(77453).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>s],37164)},69426,e=>{"use strict";let s=(0,e.i(77453).default)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],69426)},51524,e=>{"use strict";let s=(0,e.i(77453).default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>s],51524)},32757,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(58888),l=e.i(1763),c=e.i(62380),r=e.i(95511),i=e.i(77453);let n=(0,i.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var d=e.i(74763),m=e.i(48470),x=e.i(31289),o=e.i(47571),h=e.i(97389),u=e.i(53638),p=e.i(37164),j=e.i(30800),f=e.i(92309);let b=(0,i.default)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),N=(0,i.default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),y=(0,i.default)("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]),g=(0,i.default)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),v=(0,i.default)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var _=e.i(69426),k=e.i(51524);let w=["pending","payment_confirmed","accepted","preparing","ready_for_pickup","assigned_to_driver","picked_up","in_transit","delivered","cancelled","refunded"],C={pending:{icon:d.Clock,color:"text-amber-500",label:"Order Placed"},payment_confirmed:{icon:N,color:"text-blue-500",label:"Payment Confirmed"},accepted:{icon:f.CheckCircle,color:"text-emerald-500",label:"Accepted by Chef"},preparing:{icon:y,color:"text-orange-500",label:"Preparing"},ready_for_pickup:{icon:b,color:"text-purple-500",label:"Ready for Pickup"},assigned_to_driver:{icon:h.Truck,color:"text-indigo-500",label:"Driver Assigned"},picked_up:{icon:b,color:"text-blue-600",label:"Picked Up"},in_transit:{icon:g,color:"text-blue-500",label:"In Transit"},delivered:{icon:v,color:"text-emerald-600",label:"Delivered"},cancelled:{icon:_.XCircle,color:"text-red-500",label:"Cancelled"},refunded:{icon:k.RotateCcw,color:"text-gray-500",label:"Refunded"}};function T(){let e,[i,f]=(0,t.useState)([]),[b,N]=(0,t.useState)(!0),[y,g]=(0,t.useState)("all"),[v,_]=(0,t.useState)(""),[T,S]=(0,t.useState)(1),[Z,M]=(0,t.useState)(0),[D,R]=(0,t.useState)(null),[P,q]=(0,t.useState)(!1),[A,L]=(0,t.useState)(""),[O,z]=(0,t.useState)(!1);(0,t.useEffect)(()=>{U()},[y,T]);let U=async()=>{N(!0);try{let e=await a.api.getOrders({status:"all"===y?void 0:y,search:v||void 0,page:T});f(e.orders),M(e.total)}catch(e){console.error("Failed to fetch orders:",e),f([{id:"1",order_number:"RND-2024-001234",customer_name:"John Doe",customer_email:"john@example.com",customer_phone:"+1 234-567-8900",chef_name:"Maria's Kitchen",chef_id:"chef-1",driver_name:"David Chen",driver_id:"driver-1",status:"delivered",total_cents:4599,subtotal_cents:3500,delivery_fee_cents:599,tax_cents:455,tip_cents:500,commission_cents:525,delivery_address:"123 Main St, Hamilton, ON L8P 1A1",item_count:3,items:[{id:"1",name:"Spaghetti Carbonara",quantity:1,price_cents:1800},{id:"2",name:"Caesar Salad",quantity:1,price_cents:1200},{id:"3",name:"Tiramisu",quantity:1,price_cents:800}],status_history:[{status:"pending",timestamp:"2024-01-20T12:00:00Z"},{status:"payment_confirmed",timestamp:"2024-01-20T12:01:00Z"},{status:"accepted",timestamp:"2024-01-20T12:05:00Z"},{status:"preparing",timestamp:"2024-01-20T12:10:00Z"},{status:"ready_for_pickup",timestamp:"2024-01-20T12:35:00Z"},{status:"assigned_to_driver",timestamp:"2024-01-20T12:40:00Z"},{status:"picked_up",timestamp:"2024-01-20T12:45:00Z"},{status:"in_transit",timestamp:"2024-01-20T12:50:00Z"},{status:"delivered",timestamp:"2024-01-20T13:05:00Z"}],created_at:"2024-01-20T12:00:00Z",updated_at:"2024-01-20T13:05:00Z",special_instructions:"Please ring the doorbell twice"},{id:"2",order_number:"RND-2024-001235",customer_name:"Sarah Johnson",customer_email:"sarah@example.com",customer_phone:"+1 234-567-8901",chef_name:"Chen's Dumplings",chef_id:"chef-2",status:"preparing",total_cents:2899,subtotal_cents:2200,delivery_fee_cents:499,tax_cents:286,tip_cents:200,commission_cents:330,delivery_address:"456 Oak Ave, Burlington, ON L7R 2B3",item_count:2,items:[{id:"1",name:"Pork Dumplings (12pc)",quantity:2,price_cents:1400},{id:"2",name:"Wonton Soup",quantity:1,price_cents:800}],status_history:[{status:"pending",timestamp:"2024-01-20T14:00:00Z"},{status:"payment_confirmed",timestamp:"2024-01-20T14:01:00Z"},{status:"accepted",timestamp:"2024-01-20T14:05:00Z"},{status:"preparing",timestamp:"2024-01-20T14:10:00Z"}],created_at:"2024-01-20T14:00:00Z",updated_at:"2024-01-20T14:10:00Z"},{id:"3",order_number:"RND-2024-001236",customer_name:"Mike Brown",customer_email:"mike@example.com",chef_name:"Soul Food by James",status:"cancelled",total_cents:3599,subtotal_cents:2800,delivery_fee_cents:599,tax_cents:364,tip_cents:300,commission_cents:420,delivery_address:"789 Pine St, Oakville, ON L6H 3A4",item_count:2,status_history:[{status:"pending",timestamp:"2024-01-19T18:00:00Z"},{status:"payment_confirmed",timestamp:"2024-01-19T18:01:00Z"},{status:"cancelled",timestamp:"2024-01-19T18:15:00Z",note:"Customer requested cancellation"}],created_at:"2024-01-19T18:00:00Z",updated_at:"2024-01-19T18:15:00Z"}]),M(1284)}finally{N(!1)}},I=async()=>{if(D&&A){z(!0);try{await a.api.refundOrder(D.id,A),q(!1),L(""),R(null),U()}catch(e){console.error("Failed to refund order:",e)}finally{z(!1)}}},H=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e/100),B=e=>{switch(e){case"delivered":return"badge-approved";case"cancelled":case"refunded":return"badge-rejected";case"pending":return"badge-pending";default:return"bg-blue-100 text-blue-700"}},F=i.filter(e=>{if(!v)return!0;let s=v.toLowerCase();return e.order_number.toLowerCase().includes(s)||e.customer_name.toLowerCase().includes(s)||e.chef_name.toLowerCase().includes(s)}),X=Math.ceil(Z/20);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-ink",children:"Order Management"}),(0,s.jsx)("p",{className:"text-muted text-sm",children:"View and manage all orders"})]}),(0,s.jsxs)("button",{type:"button",onClick:U,disabled:b,className:"btn-secondary text-sm flex items-center gap-2",children:[(0,s.jsx)(n,{className:`w-4 h-4 ${b?"animate-spin":""}`}),"Refresh"]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(c.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted"}),(0,s.jsx)("input",{type:"text",value:v,onChange:e=>_(e.target.value),onKeyDown:e=>"Enter"===e.key&&U(),placeholder:"Search by order number, customer, or chef...",className:"input pl-10"})]}),(0,s.jsxs)("select",{value:y,onChange:e=>{g(e.target.value),S(1)},className:"input w-full sm:w-48",title:"Filter by order status","aria-label":"Filter by order status",children:[(0,s.jsx)("option",{value:"all",children:"All Statuses"}),w.map(e=>(0,s.jsx)("option",{value:e,children:e.replace(/_/g," ")},e))]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,s.jsx)("div",{className:"card bg-amber-50 border-amber-200",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-amber-700",children:i.filter(e=>"pending"===e.status||"payment_confirmed"===e.status).length}),(0,s.jsx)("p",{className:"text-xs text-amber-600",children:"Pending"})]})}),(0,s.jsx)("div",{className:"card bg-blue-50 border-blue-200",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:i.filter(e=>["accepted","preparing","ready_for_pickup"].includes(e.status)).length}),(0,s.jsx)("p",{className:"text-xs text-blue-600",children:"In Progress"})]})}),(0,s.jsx)("div",{className:"card bg-purple-50 border-purple-200",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-700",children:i.filter(e=>["assigned_to_driver","picked_up","in_transit"].includes(e.status)).length}),(0,s.jsx)("p",{className:"text-xs text-purple-600",children:"In Delivery"})]})}),(0,s.jsx)("div",{className:"card bg-emerald-50 border-emerald-200",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-emerald-700",children:i.filter(e=>"delivered"===e.status).length}),(0,s.jsx)("p",{className:"text-xs text-emerald-600",children:"Delivered"})]})}),(0,s.jsx)("div",{className:"card bg-red-50 border-red-200",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-red-700",children:i.filter(e=>"cancelled"===e.status||"refunded"===e.status).length}),(0,s.jsx)("p",{className:"text-xs text-red-600",children:"Cancelled/Refunded"})]})})]}),(0,s.jsxs)("div",{className:"card",children:[b?(0,s.jsx)("div",{className:"text-center py-12 text-muted",children:"Loading..."}):0===F.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(l.ShoppingBag,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),(0,s.jsx)("p",{className:"text-muted",children:"No orders found"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50",children:[(0,s.jsx)("th",{className:"table-header",children:"Order"}),(0,s.jsx)("th",{className:"table-header",children:"Customer"}),(0,s.jsx)("th",{className:"table-header",children:"Chef"}),(0,s.jsx)("th",{className:"table-header",children:"Driver"}),(0,s.jsx)("th",{className:"table-header",children:"Status"}),(0,s.jsx)("th",{className:"table-header",children:"Total"}),(0,s.jsx)("th",{className:"table-header",children:"Commission"}),(0,s.jsx)("th",{className:"table-header",children:"Time"}),(0,s.jsx)("th",{className:"table-header",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:F.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"table-cell",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-mono text-sm font-medium",children:e.order_number}),(0,s.jsxs)("p",{className:"text-xs text-muted",children:[e.item_count," items"]})]})}),(0,s.jsx)("td",{className:"table-cell",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.User,{className:"w-4 h-4 text-muted"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.customer_name}),(0,s.jsx)("p",{className:"text-xs text-muted",children:e.customer_email})]})]})}),(0,s.jsx)("td",{className:"table-cell",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.ChefHat,{className:"w-4 h-4 text-orange-500"}),(0,s.jsx)("span",{children:e.chef_name})]})}),(0,s.jsx)("td",{className:"table-cell",children:e.driver_name?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.Truck,{className:"w-4 h-4 text-purple-500"}),(0,s.jsx)("span",{children:e.driver_name})]}):(0,s.jsx)("span",{className:"text-muted text-sm",children:"Unassigned"})}),(0,s.jsx)("td",{className:"table-cell",children:(0,s.jsx)("span",{className:`badge ${B(e.status)}`,children:e.status.replace(/_/g," ")})}),(0,s.jsx)("td",{className:"table-cell",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:H(e.total_cents)}),e.tip_cents>0&&(0,s.jsxs)("p",{className:"text-xs text-muted",children:["+",H(e.tip_cents)," tip"]})]})}),(0,s.jsx)("td",{className:"table-cell",children:(0,s.jsx)("span",{className:"text-emerald-600 font-medium",children:H(e.commission_cents)})}),(0,s.jsx)("td",{className:"table-cell",children:(0,s.jsx)("div",{className:"space-y-1",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,s.jsx)(d.Clock,{className:"w-3 h-3 text-muted"}),new Date(e.created_at).toLocaleString()]})})}),(0,s.jsx)("td",{className:"table-cell",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>R(e),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(r.Eye,{className:"w-4 h-4 text-muted"})}),"delivered"===e.status&&(0,s.jsx)("button",{type:"button",onClick:()=>{R(e),q(!0)},className:"px-2 py-1 hover:bg-red-100 rounded-lg transition-colors text-xs text-red-600 font-medium",title:"Issue Refund",children:"Refund"})]})})]},e.id))})]})}),Z>20&&(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-100",children:[(0,s.jsxs)("p",{className:"text-sm text-muted",children:["Showing ",(T-1)*20+1," - ",Math.min(20*T,Z)," of"," ",Z]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>S(e=>Math.max(1,e-1)),disabled:1===T,className:"btn-secondary text-sm",children:"Previous"}),(0,s.jsxs)("span",{className:"text-sm text-muted px-2",children:["Page ",T," of ",X]}),(0,s.jsx)("button",{type:"button",onClick:()=>S(e=>e+1),disabled:20*T>=Z,className:"btn-secondary text-sm",children:"Next"})]})]})]}),D&&!P&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white border-b p-6 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-ink",children:"Order Details"}),(0,s.jsx)("p",{className:"text-sm text-muted font-mono",children:D.order_number})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:`badge ${B(D.status)}`,children:D.status.replace(/_/g," ")}),(0,s.jsx)("button",{type:"button",onClick:()=>R(null),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Close","aria-label":"Close order details",children:(0,s.jsx)(p.X,{className:"w-5 h-5"})})]})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h4",{className:"font-semibold text-ink flex items-center gap-2",children:[(0,s.jsx)(u.User,{className:"w-4 h-4"}),"Customer"]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 space-y-2",children:[(0,s.jsx)("p",{className:"font-medium",children:D.customer_name}),(0,s.jsx)("p",{className:"text-sm text-muted",children:D.customer_email}),D.customer_phone&&(0,s.jsx)("p",{className:"text-sm text-muted",children:D.customer_phone})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h4",{className:"font-semibold text-ink flex items-center gap-2",children:[(0,s.jsx)(o.ChefHat,{className:"w-4 h-4 text-orange-500"}),"Chef"]}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-xl p-4",children:(0,s.jsx)("p",{className:"font-medium",children:D.chef_name})})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h4",{className:"font-semibold text-ink flex items-center gap-2",children:[(0,s.jsx)(m.MapPin,{className:"w-4 h-4"}),"Delivery Details"]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 space-y-2",children:[(0,s.jsx)("p",{className:"text-sm",children:D.delivery_address}),D.driver_name&&(0,s.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-200 mt-2",children:[(0,s.jsx)(h.Truck,{className:"w-4 h-4 text-purple-500"}),(0,s.jsxs)("span",{className:"text-sm",children:["Driver: ",D.driver_name]})]}),D.special_instructions&&(0,s.jsxs)("div",{className:"pt-2 border-t border-gray-200 mt-2",children:[(0,s.jsx)("p",{className:"text-xs text-muted",children:"Special Instructions:"}),(0,s.jsx)("p",{className:"text-sm italic",children:D.special_instructions})]})]})]}),D.items&&D.items.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h4",{className:"font-semibold text-ink flex items-center gap-2",children:[(0,s.jsx)(l.ShoppingBag,{className:"w-4 h-4"}),"Order Items"]}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-xl p-4",children:(0,s.jsx)("div",{className:"space-y-3",children:D.items.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"w-6 h-6 bg-white rounded-lg flex items-center justify-center text-xs font-medium",children:[e.quantity,"x"]}),(0,s.jsx)("span",{className:"text-sm",children:e.name})]}),(0,s.jsx)("span",{className:"text-sm font-medium",children:H(e.price_cents*e.quantity)})]},e.id))})})]}),D.status_history&&D.status_history.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h4",{className:"font-semibold text-ink flex items-center gap-2",children:[(0,s.jsx)(d.Clock,{className:"w-4 h-4"}),"Order Timeline"]}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-xl p-4",children:(e=D.status_history,(0,s.jsx)("div",{className:"relative",children:e.map((t,a)=>{let l=C[t.status]||{icon:d.Clock,color:"text-gray-500",label:t.status},c=l.icon,r=a===e.length-1;return(0,s.jsxs)("div",{className:"flex gap-4 pb-4 last:pb-0",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${r?"bg-emerald-100":"bg-gray-100"}`,children:(0,s.jsx)(c,{className:`w-4 h-4 ${l.color}`})}),!r&&(0,s.jsx)("div",{className:"w-0.5 flex-1 bg-gray-200 my-1"})]}),(0,s.jsxs)("div",{className:"flex-1 pb-2",children:[(0,s.jsx)("p",{className:"font-medium text-sm text-ink",children:l.label}),(0,s.jsx)("p",{className:"text-xs text-muted",children:new Date(t.timestamp).toLocaleString()}),t.note&&(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1 italic",children:t.note})]})]},a)})}))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h4",{className:"font-semibold text-ink flex items-center gap-2",children:[(0,s.jsx)(x.DollarSign,{className:"w-4 h-4"}),"Payment Summary"]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted",children:"Subtotal"}),(0,s.jsx)("span",{children:H(D.subtotal_cents)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted",children:"Delivery Fee"}),(0,s.jsx)("span",{children:H(D.delivery_fee_cents)})]}),void 0!==D.tax_cents&&(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted",children:"Tax"}),(0,s.jsx)("span",{children:H(D.tax_cents)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted",children:"Tip"}),(0,s.jsx)("span",{children:H(D.tip_cents)})]}),(0,s.jsxs)("div",{className:"flex justify-between font-semibold text-lg pt-2 border-t border-gray-200",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsx)("span",{children:H(D.total_cents)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-emerald-600 pt-2",children:[(0,s.jsx)("span",{children:"Platform Commission"}),(0,s.jsx)("span",{className:"font-medium",children:H(D.commission_cents)})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4 border-t",children:[(0,s.jsx)("button",{type:"button",onClick:()=>R(null),className:"flex-1 btn-secondary",children:"Close"}),"delivered"===D.status&&(0,s.jsxs)("button",{type:"button",onClick:()=>q(!0),className:"flex-1 btn-danger flex items-center justify-center gap-2",children:[(0,s.jsx)(k.RotateCcw,{className:"w-4 h-4"}),"Issue Refund"]})]})]})]})}),P&&D&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-red-100 flex items-center justify-center",children:(0,s.jsx)(j.AlertTriangle,{className:"w-5 h-5 text-red-600"})}),(0,s.jsx)("h3",{className:"text-lg font-bold text-ink",children:"Issue Refund"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{q(!1),L("")},className:"p-1 hover:bg-gray-100 rounded-lg",title:"Close modal","aria-label":"Close refund modal",children:(0,s.jsx)(p.X,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm text-muted",children:"Order"}),(0,s.jsx)("span",{className:"text-sm font-mono",children:D.order_number})]}),(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm text-muted",children:"Customer"}),(0,s.jsx)("span",{className:"text-sm",children:D.customer_name})]}),(0,s.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,s.jsx)("span",{children:"Refund Amount"}),(0,s.jsx)("span",{className:"text-red-600",children:H(D.total_cents)})]})]}),(0,s.jsx)("p",{className:"text-sm text-muted mb-4",children:"This action will refund the full order amount to the customer and mark the order as refunded."}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-ink mb-1",children:["Reason for refund ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("textarea",{value:A,onChange:e=>L(e.target.value),placeholder:"Enter the reason for this refund...",rows:3,className:"input"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{q(!1),L("")},className:"flex-1 btn-secondary",children:"Cancel"}),(0,s.jsxs)("button",{type:"button",onClick:I,disabled:!A||O,className:"flex-1 btn-danger flex items-center justify-center gap-2",children:[(0,s.jsx)(k.RotateCcw,{className:"w-4 h-4"}),O?"Processing...":"Confirm Refund"]})]})]})})]})}e.s(["default",()=>T],32757)}]);