(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{8095:function(e,t,s){Promise.resolve().then(s.bind(s,378))},7907:function(e,t,s){"use strict";var n=s(5313);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}})},378:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var n=s(3827),r=s(4090),a=s(7907),c=s(8792),i=s(3333),u=s(8222),o=s(8958);function l(){let e=(0,a.useRouter)(),{setAuth:t}=(0,o.t)(),[s,l]=(0,r.useState)(""),[h,d]=(0,r.useState)(""),[m,f]=(0,r.useState)(!1),y=async n=>{if(n.preventDefault(),s&&h){f(!0);try{let n=await u.h.login(s,h);if("chef"!==n.user.role){i.default.error("This dashboard is for chefs only");return}let r=null;try{r=await u.h.getChefProfile()}catch(e){}t(n.user,r,n.accessToken,n.refreshToken),i.default.success("Welcome back!"),e.push("/dashboard")}catch(e){i.default.error(e.message||"Login failed")}finally{f(!1)}}};return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,n.jsxs)("div",{className:"card max-w-md w-full",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDC68â€\uD83C\uDF73"}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-ink",children:"Chef Dashboard"}),(0,n.jsx)("p",{className:"text-muted mt-2",children:"Sign in to manage your kitchen"})]}),(0,n.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"Email"}),(0,n.jsx)("input",{type:"email",className:"input",placeholder:"chef@example.com",value:s,onChange:e=>l(e.target.value),required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"Password"}),(0,n.jsx)("input",{type:"password",className:"input",placeholder:"Enter your password",value:h,onChange:e=>d(e.target.value),required:!0})]}),(0,n.jsx)("button",{type:"submit",className:"btn-primary w-full",disabled:m,children:m?"Signing in...":"Sign In"})]}),(0,n.jsx)("div",{className:"mt-6 text-center",children:(0,n.jsxs)("p",{className:"text-muted",children:["New chef?"," ",(0,n.jsx)(c.default,{href:"/register",className:"text-primary-500 font-semibold hover:underline",children:"Create an account"})]})})]})})}},8222:function(e,t,s){"use strict";s.d(t,{h:function(){return r}});class n{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.getToken(),n={"Content-Type":"application/json",...t.headers};s&&(n.Authorization="Bearer ".concat(s));let r=await fetch("".concat(this.baseUrl).concat(e),{...t,headers:n}),a=await r.json();if(!r.ok)throw Error(a.message||"An error occurred");return a}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify({...e,role:"chef"})})}async getChefProfile(){return this.request("/chefs/me")}async applyAsChef(e){return this.request("/chefs/apply",{method:"POST",body:JSON.stringify(e)})}async updateChefProfile(e,t){return this.request("/chefs/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async toggleVacationMode(e){return this.request("/chefs/".concat(e,"/toggle-vacation-mode"),{method:"POST"})}async getStripeOnboardingLink(e){return this.request("/chefs/".concat(e,"/stripe/onboard"),{method:"POST"})}async getStripeStatus(e){return this.request("/chefs/".concat(e,"/stripe/status"))}async getMenus(e){return this.request("/chefs/".concat(e,"/menus"))}async createMenu(e,t){return this.request("/chefs/".concat(e,"/menus"),{method:"POST",body:JSON.stringify(t)})}async updateMenu(e,t){return this.request("/menus/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteMenu(e){return this.request("/menus/".concat(e),{method:"DELETE"})}async createMenuItem(e,t){return this.request("/menus/".concat(e,"/items"),{method:"POST",body:JSON.stringify(t)})}async updateMenuItem(e,t){return this.request("/menu-items/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteMenuItem(e){return this.request("/menu-items/".concat(e),{method:"DELETE"})}async getOrders(e){let t=(null==e?void 0:e.status)?"?status=".concat(e.status):"";return this.request("/orders".concat(t))}async getOrder(e){return this.request("/orders/".concat(e))}async acceptOrder(e,t){return this.request("/orders/".concat(e,"/accept"),{method:"PATCH",body:JSON.stringify({estimatedPrepTime:t})})}async rejectOrder(e,t){return this.request("/orders/".concat(e,"/reject"),{method:"PATCH",body:JSON.stringify({reason:t})})}async markOrderReady(e){return this.request("/orders/".concat(e,"/ready"),{method:"PATCH"})}async getEarnings(e){return this.request("/chefs/me/earnings".concat(e?"?period=".concat(e):""))}constructor(){this.baseUrl="".concat("http://localhost:9001","/api/").concat("v2"),this.getToken=()=>{{let t=localStorage.getItem("chef-auth-storage");if(t){var e;return(null===(e=JSON.parse(t).state)||void 0===e?void 0:e.accessToken)||null}}return null}}}let r=new n},8958:function(e,t,s){"use strict";s.d(t,{t:function(){return a}});var n=s(798),r=s(7305);let a=(0,n.Ue)()((0,r.tJ)(e=>({user:null,chef:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!0,setAuth:(t,s,n,r)=>e({user:t,chef:s,accessToken:n,refreshToken:r,isAuthenticated:!0,isLoading:!1}),setChef:t=>e({chef:t}),clearAuth:()=>e({user:null,chef:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1}),setLoading:t=>e({isLoading:t})}),{name:"chef-auth-storage",onRehydrateStorage:()=>e=>{null==e||e.setLoading(!1)}}))}},function(e){e.O(0,[402,333,792,971,69,744],function(){return e(e.s=8095)}),_N_E=e.O()}]);