(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53751,e=>{"use strict";let t=new class{baseUrl;getToken;constructor(){this.baseUrl="http://localhost:9001/api/v2",this.getToken=()=>{{let e=localStorage.getItem("chef-auth-storage");if(e){let t=JSON.parse(e);return t.state?.accessToken||null}}return null}}async request(e,t={}){let s=this.getToken(),r={"Content-Type":"application/json",...t.headers};s&&(r.Authorization=`Bearer ${s}`);let a=await fetch(`${this.baseUrl}${e}`,{...t,headers:r}),n=await a.json();if(!a.ok)throw Error(n.message||"An error occurred");return n}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify({...e,role:"chef"})})}async getChefProfile(){return this.request("/chefs/me")}async applyAsChef(e){return this.request("/chefs/apply",{method:"POST",body:JSON.stringify(e)})}async updateChefProfile(e,t){return this.request(`/chefs/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async toggleVacationMode(e){return this.request(`/chefs/${e}/toggle-vacation-mode`,{method:"POST"})}async getStripeOnboardingLink(e){return this.request(`/chefs/${e}/stripe/onboard`,{method:"POST"})}async getStripeStatus(e){return this.request(`/chefs/${e}/stripe/status`)}async getMenus(e){return this.request(`/chefs/${e}/menus`)}async createMenu(e,t){return this.request(`/chefs/${e}/menus`,{method:"POST",body:JSON.stringify(t)})}async updateMenu(e,t){return this.request(`/menus/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async deleteMenu(e){return this.request(`/menus/${e}`,{method:"DELETE"})}async createMenuItem(e,t){return this.request(`/menus/${e}/items`,{method:"POST",body:JSON.stringify(t)})}async updateMenuItem(e,t){return this.request(`/menu-items/${e}`,{method:"PATCH",body:JSON.stringify(t)})}async deleteMenuItem(e){return this.request(`/menu-items/${e}`,{method:"DELETE"})}async getOrders(e){let t=e?.status?`?status=${e.status}`:"";return this.request(`/orders${t}`)}async getOrder(e){return this.request(`/orders/${e}`)}async acceptOrder(e,t){return this.request(`/orders/${e}/accept`,{method:"PATCH",body:JSON.stringify({estimatedPrepTime:t})})}async rejectOrder(e,t){return this.request(`/orders/${e}/reject`,{method:"PATCH",body:JSON.stringify({reason:t})})}async markOrderReady(e){return this.request(`/orders/${e}/ready`,{method:"PATCH"})}async getEarnings(e){let t=e?`?period=${e}`:"";return this.request(`/chefs/me/earnings${t}`)}};e.s(["api",0,t])},37346,e=>{"use strict";let t=(0,e.i(80402).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],37346)},73393,e=>{"use strict";let t=(0,e.i(80402).default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],73393)},73864,e=>{"use strict";let t=(0,e.i(80402).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],73864)},1177,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(4917),n=e.i(53751),i=e.i(73864);let l=(0,e.i(80402).default)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var c=e.i(73393),d=e.i(37346),o=e.i(6260);function m(){let e=(0,r.useRouter)(),{chef:m,user:u}=(0,a.useAuthStore)(),[x,h]=(0,s.useState)(null),[p,y]=(0,s.useState)(!0),[b,g]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1);(0,s.useEffect)(()=>{m&&N()},[m]);let N=async()=>{if(m?.id)try{y(!0);let e=await n.api.getStripeStatus(m.id);h(e)}catch(e){console.error("Failed to fetch Stripe status:",e),h(null)}finally{y(!1)}},S=async()=>{if(m?.id)try{g(!0);let e=await n.api.getStripeOnboardingLink(m.id);window.location.href=e.url}catch(e){console.error("Failed to start onboarding:",e),alert(e.message||"Failed to start Stripe onboarding")}finally{g(!1)}},v=async()=>{if(m?.id)try{j(!0);let e=await n.api.getStripeOnboardingLink(m.id);window.open(e.url,"_blank")}catch(e){console.error("Failed to open Stripe dashboard:",e),alert(e.message||"Failed to open Stripe dashboard")}finally{j(!1)}};if(!m)return(0,t.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,t.jsxs)("div",{className:"card text-center py-12",children:[(0,t.jsx)("div",{className:"text-6xl mb-6",children:"ðŸ‘¨â€ðŸ³"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-ink mb-4",children:"Complete Your Profile First"}),(0,t.jsx)("p",{className:"text-muted mb-8",children:"You need to complete your chef profile before setting up payments"}),(0,t.jsx)("button",{onClick:()=>e.push("/dashboard/settings"),className:"btn-primary",children:"Go to Settings"})]})});if(p)return(0,t.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"card text-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-500 border-t-transparent mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted",children:"Loading Stripe status..."})]})});let k=x?.onboardingComplete&&x?.chargesEnabled&&x?.payoutsEnabled,w=x?.requiresInformation||x&&!x.onboardingComplete;return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-ink mb-2",children:"ðŸ’³ Stripe Payments"}),(0,t.jsx)("p",{className:"text-muted",children:"Connect your Stripe account to receive payments from customers"})]}),(0,t.jsx)("div",{className:"card",children:x?k?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(l,{className:"text-green-600",size:32})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-ink mb-2",children:"âœ… You're All Set!"}),(0,t.jsx)("p",{className:"text-muted mb-6",children:"Your Stripe account is fully connected and ready to receive payments."}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto mb-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl mb-1",children:"âœ…"}),(0,t.jsx)("p",{className:"text-sm text-muted",children:"Charges Enabled"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl mb-1",children:"ðŸ’¸"}),(0,t.jsx)("p",{className:"text-sm text-muted",children:"Payouts Enabled"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl mb-1",children:"ðŸ“‹"}),(0,t.jsx)("p",{className:"text-sm text-muted",children:"Details Complete"})]})]}),(0,t.jsxs)("button",{onClick:v,disabled:f,className:"btn-secondary inline-flex items-center gap-2",children:[(0,t.jsx)(i.ExternalLink,{size:16}),f?"Opening...":"Open Stripe Dashboard"]})]}):w?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(c.AlertCircle,{className:"text-yellow-600",size:32})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-ink mb-2",children:"Action Required"}),(0,t.jsx)("p",{className:"text-muted mb-6",children:"Your Stripe onboarding is incomplete. Please complete the remaining steps."}),x.requirements&&(0,t.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6 text-left max-w-md mx-auto",children:[(0,t.jsx)("p",{className:"font-semibold text-ink mb-2",children:"Missing Information:"}),(0,t.jsx)("ul",{className:"space-y-1",children:x.requirements.currently_due.length>0&&(0,t.jsx)(t.Fragment,{children:x.requirements.currently_due.map((e,s)=>(0,t.jsxs)("li",{className:"text-sm text-muted flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-yellow-600 mt-0.5",children:"â€¢"}),(0,t.jsx)("span",{children:e.replace(/_/g," ")})]},s))})})]}),(0,t.jsx)("button",{onClick:S,disabled:b,className:"btn-primary",children:b?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Redirecting..."]}):"Complete Onboarding"})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(d.Clock,{className:"text-blue-600",size:32})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-ink mb-2",children:"Onboarding In Progress"}),(0,t.jsx)("p",{className:"text-muted mb-6",children:"Your Stripe account is being verified. This may take a few minutes."}),(0,t.jsx)("button",{onClick:N,className:"btn-secondary",children:"Refresh Status"})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(o.CreditCard,{className:"text-orange-600",size:32})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-ink mb-2",children:"Connect with Stripe"}),(0,t.jsx)("p",{className:"text-muted mb-6 max-w-md mx-auto",children:"To receive payments, you'll need to connect a Stripe account. This takes about 5-10 minutes."}),(0,t.jsx)("button",{onClick:S,disabled:b,className:"btn-primary",children:b?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Redirecting to Stripe..."]}):"Start Stripe Onboarding"})]})}),(0,t.jsxs)("div",{className:"card bg-blue-50 border-blue-200",children:[(0,t.jsx)("h3",{className:"font-semibold text-ink mb-3",children:"â„¹ï¸ About Stripe Connect"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm text-muted",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"What is Stripe?"})," Stripe is a secure payment processor that handles all customer payments. You'll receive payments directly to your bank account."]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"How long does onboarding take?"})," About 5-10 minutes. You'll need your business details, bank account information, and a valid ID."]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"When do I get paid?"})," Payments are transferred to your bank account on a rolling 2-day basis after each successful delivery."]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Platform fee:"})," RideNDine takes a 15% platform fee on each order. You receive 85% of the order subtotal."]})]})]}),x&&(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h3",{className:"font-semibold text-ink mb-4",children:"Account Details"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-muted",children:"Account ID"}),(0,t.jsx)("span",{className:"font-mono text-sm text-ink",children:x.accountId})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-muted",children:"Onboarding Complete"}),(0,t.jsx)("span",{className:x.onboardingComplete?"text-green-600":"text-yellow-600",children:x.onboardingComplete?"âœ… Yes":"â³ In Progress"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-muted",children:"Charges Enabled"}),(0,t.jsx)("span",{className:x.chargesEnabled?"text-green-600":"text-red-600",children:x.chargesEnabled?"âœ… Yes":"âŒ No"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,t.jsx)("span",{className:"text-muted",children:"Payouts Enabled"}),(0,t.jsx)("span",{className:x.payoutsEnabled?"text-green-600":"text-red-600",children:x.payoutsEnabled?"âœ… Yes":"âŒ No"})]})]})]})]})}e.s(["default",()=>m],1177)}]);