(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{2050:function(e,t,r){Promise.resolve().then(r.bind(r,5829))},7461:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var s=r(4090),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),c=(e,t)=>{let r=(0,s.forwardRef)((r,c)=>{let{color:i="currentColor",size:d=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:u="",children:h,...m}=r;return(0,s.createElement)("svg",{ref:c,...n,width:d,height:d,stroke:i,strokeWidth:l?24*Number(o)/Number(d):o,className:["lucide","lucide-".concat(a(e)),u].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return r.displayName="".concat(e),r}},9259:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(7461).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8441:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(7461).Z)("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]])},6490:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(7461).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2235:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(7461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5829:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(3827),n=r(4090),a=r(8222),c=r(3333),i=r(9259),d=r(2235),o=r(8441),l=r(6490);function u(){let[e,t]=(0,n.useState)([]),[r,u]=(0,n.useState)("pending"),[h,m]=(0,n.useState)(!0);(0,n.useEffect)(()=>{y()},[]);let y=async()=>{try{let e=await a.h.getOrders();t(e.data||[])}catch(e){console.error("Failed to fetch orders:",e)}finally{m(!1)}},f=async e=>{try{await a.h.acceptOrder(e,30),c.default.success("Order accepted!"),y()}catch(e){c.default.error(e.message||"Failed to accept order")}},p=async e=>{try{await a.h.rejectOrder(e,"Unable to fulfill at this time"),c.default.success("Order rejected"),y()}catch(e){c.default.error(e.message||"Failed to reject order")}},g=async e=>{try{await a.h.markOrderReady(e),c.default.success("Order marked as ready!"),y()}catch(e){c.default.error(e.message||"Failed to mark order ready")}},x=e=>"$".concat((e/100).toFixed(2)),b=e.filter(e=>{switch(r){case"pending":return"payment_confirmed"===e.status;case"active":return["accepted","preparing","ready_for_pickup"].includes(e.status);case"completed":return["delivered","cancelled","rejected"].includes(e.status);default:return!0}}),j=e=>({payment_confirmed:"bg-yellow-100 text-yellow-700",accepted:"bg-blue-100 text-blue-700",preparing:"bg-orange-100 text-orange-700",ready_for_pickup:"bg-green-100 text-green-700",delivered:"bg-gray-100 text-gray-700",cancelled:"bg-red-100 text-red-700",rejected:"bg-red-100 text-red-700"})[e]||"bg-gray-100 text-gray-700";return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-ink",children:"Orders"}),(0,s.jsx)("p",{className:"text-muted mt-1",children:"Manage incoming orders"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:["pending","active","completed","all"].map(e=>(0,s.jsx)("button",{onClick:()=>u(e),className:"px-4 py-2 rounded-xl font-medium transition-colors ".concat(r===e?"bg-primary-500 text-white":"bg-white text-muted hover:bg-gray-50"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),h?(0,s.jsx)("div",{className:"card text-center py-12 text-muted",children:"Loading orders..."}):0===b.length?(0,s.jsxs)("div",{className:"card text-center py-12",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCB"}),(0,s.jsxs)("p",{className:"text-muted",children:["No ",r," orders"]})]}):(0,s.jsx)("div",{className:"space-y-4",children:b.map(e=>{var t,r,n;return(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("h3",{className:"font-bold text-ink",children:["Order #",e.id.slice(-6)]}),(0,s.jsx)("span",{className:"badge ".concat(j(e.status)),children:e.status.replace(/_/g," ")})]}),(0,s.jsx)("p",{className:"text-sm text-muted mt-1",children:new Date(e.createdAt).toLocaleString()})]}),(0,s.jsx)("p",{className:"text-xl font-bold text-ink",children:x(e.total)})]}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 mb-4",children:null===(t=e.items)||void 0===t?void 0:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between py-1",children:[(0,s.jsxs)("span",{className:"text-ink",children:[e.quantity,"x ",e.name]}),(0,s.jsx)("span",{className:"text-muted",children:x(e.price*e.quantity)})]},t))}),(0,s.jsxs)("p",{className:"text-sm text-muted mb-4",children:["\uD83D\uDCCD ",null===(r=e.deliveryAddress)||void 0===r?void 0:r.street,", ",null===(n=e.deliveryAddress)||void 0===n?void 0:n.city]}),"payment_confirmed"===e.status&&(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:()=>f(e.id),className:"flex-1 btn-primary flex items-center justify-center gap-2",children:[(0,s.jsx)(i.Z,{size:18}),"Accept Order"]}),(0,s.jsxs)("button",{onClick:()=>p(e.id),className:"flex-1 bg-red-100 text-red-600 font-semibold py-3 px-6 rounded-xl hover:bg-red-200 transition-colors flex items-center justify-center gap-2",children:[(0,s.jsx)(d.Z,{size:18}),"Reject"]})]}),"accepted"===e.status&&(0,s.jsxs)("button",{onClick:()=>f(e.id),className:"w-full bg-orange-500 text-white font-semibold py-3 px-6 rounded-xl hover:bg-orange-600 transition-colors flex items-center justify-center gap-2",children:[(0,s.jsx)(o.Z,{size:18}),"Start Preparing"]}),"preparing"===e.status&&(0,s.jsxs)("button",{onClick:()=>g(e.id),className:"w-full bg-green-500 text-white font-semibold py-3 px-6 rounded-xl hover:bg-green-600 transition-colors flex items-center justify-center gap-2",children:[(0,s.jsx)(i.Z,{size:18}),"Mark Ready for Pickup"]}),"ready_for_pickup"===e.status&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-green-600 py-3",children:[(0,s.jsx)(l.Z,{size:18}),(0,s.jsx)("span",{className:"font-medium",children:"Waiting for driver pickup"})]})]},e.id)})})]})}},8222:function(e,t,r){"use strict";r.d(t,{h:function(){return n}});class s{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getToken(),s={"Content-Type":"application/json",...t.headers};r&&(s.Authorization="Bearer ".concat(r));let n=await fetch("".concat(this.baseUrl).concat(e),{...t,headers:s}),a=await n.json();if(!n.ok)throw Error(a.message||"An error occurred");return a}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify({...e,role:"chef"})})}async getChefProfile(){return this.request("/chefs/me")}async applyAsChef(e){return this.request("/chefs/apply",{method:"POST",body:JSON.stringify(e)})}async updateChefProfile(e,t){return this.request("/chefs/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async toggleVacationMode(e){return this.request("/chefs/".concat(e,"/toggle-vacation-mode"),{method:"POST"})}async getStripeOnboardingLink(e){return this.request("/chefs/".concat(e,"/stripe/onboard"),{method:"POST"})}async getStripeStatus(e){return this.request("/chefs/".concat(e,"/stripe/status"))}async getMenus(e){return this.request("/chefs/".concat(e,"/menus"))}async createMenu(e,t){return this.request("/chefs/".concat(e,"/menus"),{method:"POST",body:JSON.stringify(t)})}async updateMenu(e,t){return this.request("/menus/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteMenu(e){return this.request("/menus/".concat(e),{method:"DELETE"})}async createMenuItem(e,t){return this.request("/menus/".concat(e,"/items"),{method:"POST",body:JSON.stringify(t)})}async updateMenuItem(e,t){return this.request("/menu-items/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteMenuItem(e){return this.request("/menu-items/".concat(e),{method:"DELETE"})}async getOrders(e){let t=(null==e?void 0:e.status)?"?status=".concat(e.status):"";return this.request("/orders".concat(t))}async getOrder(e){return this.request("/orders/".concat(e))}async acceptOrder(e,t){return this.request("/orders/".concat(e,"/accept"),{method:"PATCH",body:JSON.stringify({estimatedPrepTime:t})})}async rejectOrder(e,t){return this.request("/orders/".concat(e,"/reject"),{method:"PATCH",body:JSON.stringify({reason:t})})}async markOrderReady(e){return this.request("/orders/".concat(e,"/ready"),{method:"PATCH"})}async getEarnings(e){return this.request("/chefs/me/earnings".concat(e?"?period=".concat(e):""))}constructor(){this.baseUrl="".concat("http://localhost:9001","/api/").concat("v2"),this.getToken=()=>{{let t=localStorage.getItem("chef-auth-storage");if(t){var e;return(null===(e=JSON.parse(t).state)||void 0===e?void 0:e.accessToken)||null}}return null}}}let n=new s}},function(e){e.O(0,[333,971,69,744],function(){return e(e.s=2050)}),_N_E=e.O()}]);