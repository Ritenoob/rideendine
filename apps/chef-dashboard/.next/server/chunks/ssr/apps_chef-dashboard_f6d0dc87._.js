module.exports=[2904,a=>{"use strict";let b=new class{baseUrl;getToken;constructor(){this.baseUrl="http://localhost:9001/api/v2",this.getToken=()=>null}async request(a,b={}){let c=this.getToken(),d={"Content-Type":"application/json",...b.headers};c&&(d.Authorization=`Bearer ${c}`);let e=await fetch(`${this.baseUrl}${a}`,{...b,headers:d}),f=await e.json();if(!e.ok)throw Error(f.message||"An error occurred");return f}async login(a,b){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:a,password:b})})}async register(a){return this.request("/auth/register",{method:"POST",body:JSON.stringify({...a,role:"chef"})})}async getChefProfile(){return this.request("/chefs/me")}async applyAsChef(a){return this.request("/chefs/apply",{method:"POST",body:JSON.stringify(a)})}async updateChefProfile(a,b){return this.request(`/chefs/${a}`,{method:"PATCH",body:JSON.stringify(b)})}async toggleVacationMode(a){return this.request(`/chefs/${a}/toggle-vacation-mode`,{method:"POST"})}async getStripeOnboardingLink(a){return this.request(`/chefs/${a}/stripe/onboard`,{method:"POST"})}async getStripeStatus(a){return this.request(`/chefs/${a}/stripe/status`)}async getMenus(a){return this.request(`/chefs/${a}/menus`)}async createMenu(a,b){return this.request(`/chefs/${a}/menus`,{method:"POST",body:JSON.stringify(b)})}async updateMenu(a,b){return this.request(`/menus/${a}`,{method:"PATCH",body:JSON.stringify(b)})}async deleteMenu(a){return this.request(`/menus/${a}`,{method:"DELETE"})}async createMenuItem(a,b){return this.request(`/menus/${a}/items`,{method:"POST",body:JSON.stringify(b)})}async updateMenuItem(a,b){return this.request(`/menu-items/${a}`,{method:"PATCH",body:JSON.stringify(b)})}async deleteMenuItem(a){return this.request(`/menu-items/${a}`,{method:"DELETE"})}async getOrders(a){let b=a?.status?`?status=${a.status}`:"";return this.request(`/orders${b}`)}async getOrder(a){return this.request(`/orders/${a}`)}async acceptOrder(a,b){return this.request(`/orders/${a}/accept`,{method:"PATCH",body:JSON.stringify({estimatedPrepTime:b})})}async rejectOrder(a,b){return this.request(`/orders/${a}/reject`,{method:"PATCH",body:JSON.stringify({reason:b})})}async markOrderReady(a){return this.request(`/orders/${a}/ready`,{method:"PATCH"})}async getEarnings(a){let b=a?`?period=${a}`:"";return this.request(`/chefs/me/earnings${b}`)}};a.s(["api",0,b])},94019,a=>{"use strict";let b=(0,a.i(8462).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],94019)},92310,a=>{"use strict";let b=(0,a.i(8462).default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92310)},69081,a=>{"use strict";let b=(0,a.i(8462).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],69081)},22479,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38795),f=a.i(2904),g=a.i(69081);let h=(0,a.i(8462).default)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var i=a.i(92310),j=a.i(94019),k=a.i(23299);function l(){let a=(0,d.useRouter)(),{chef:l,user:m}=(0,e.useAuthStore)(),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1);(0,c.useEffect)(()=>{l&&v()},[l]);let v=async()=>{if(l?.id)try{q(!0);let a=await f.api.getStripeStatus(l.id);o(a)}catch(a){console.error("Failed to fetch Stripe status:",a),o(null)}finally{q(!1)}},w=async()=>{if(l?.id)try{s(!0);let a=await f.api.getStripeOnboardingLink(l.id);window.location.href=a.url}catch(a){console.error("Failed to start onboarding:",a),alert(a.message||"Failed to start Stripe onboarding")}finally{s(!1)}},x=async()=>{if(l?.id)try{u(!0);let a=await f.api.getStripeOnboardingLink(l.id);window.open(a.url,"_blank")}catch(a){console.error("Failed to open Stripe dashboard:",a),alert(a.message||"Failed to open Stripe dashboard")}finally{u(!1)}};if(!l)return(0,b.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,b.jsxs)("div",{className:"card text-center py-12",children:[(0,b.jsx)("div",{className:"text-6xl mb-6",children:"ðŸ‘¨â€ðŸ³"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-ink mb-4",children:"Complete Your Profile First"}),(0,b.jsx)("p",{className:"text-muted mb-8",children:"You need to complete your chef profile before setting up payments"}),(0,b.jsx)("button",{onClick:()=>a.push("/dashboard/settings"),className:"btn-primary",children:"Go to Settings"})]})});if(p)return(0,b.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,b.jsxs)("div",{className:"card text-center py-12",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-500 border-t-transparent mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted",children:"Loading Stripe status..."})]})});let y=n?.onboardingComplete&&n?.chargesEnabled&&n?.payoutsEnabled,z=n?.requiresInformation||n&&!n.onboardingComplete;return(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-ink mb-2",children:"ðŸ’³ Stripe Payments"}),(0,b.jsx)("p",{className:"text-muted",children:"Connect your Stripe account to receive payments from customers"})]}),(0,b.jsx)("div",{className:"card",children:n?y?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(h,{className:"text-green-600",size:32})}),(0,b.jsx)("h2",{className:"text-xl font-bold text-ink mb-2",children:"âœ… You're All Set!"}),(0,b.jsx)("p",{className:"text-muted mb-6",children:"Your Stripe account is fully connected and ready to receive payments."}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto mb-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl mb-1",children:"âœ…"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Charges Enabled"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl mb-1",children:"ðŸ’¸"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Payouts Enabled"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl mb-1",children:"ðŸ“‹"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Details Complete"})]})]}),(0,b.jsxs)("button",{onClick:x,disabled:t,className:"btn-secondary inline-flex items-center gap-2",children:[(0,b.jsx)(g.ExternalLink,{size:16}),t?"Opening...":"Open Stripe Dashboard"]})]}):z?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(i.AlertCircle,{className:"text-yellow-600",size:32})}),(0,b.jsx)("h2",{className:"text-xl font-bold text-ink mb-2",children:"Action Required"}),(0,b.jsx)("p",{className:"text-muted mb-6",children:"Your Stripe onboarding is incomplete. Please complete the remaining steps."}),n.requirements&&(0,b.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6 text-left max-w-md mx-auto",children:[(0,b.jsx)("p",{className:"font-semibold text-ink mb-2",children:"Missing Information:"}),(0,b.jsx)("ul",{className:"space-y-1",children:n.requirements.currently_due.length>0&&(0,b.jsx)(b.Fragment,{children:n.requirements.currently_due.map((a,c)=>(0,b.jsxs)("li",{className:"text-sm text-muted flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-yellow-600 mt-0.5",children:"â€¢"}),(0,b.jsx)("span",{children:a.replace(/_/g," ")})]},c))})})]}),(0,b.jsx)("button",{onClick:w,disabled:r,className:"btn-primary",children:r?(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Redirecting..."]}):"Complete Onboarding"})]}):(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(j.Clock,{className:"text-blue-600",size:32})}),(0,b.jsx)("h2",{className:"text-xl font-bold text-ink mb-2",children:"Onboarding In Progress"}),(0,b.jsx)("p",{className:"text-muted mb-6",children:"Your Stripe account is being verified. This may take a few minutes."}),(0,b.jsx)("button",{onClick:v,className:"btn-secondary",children:"Refresh Status"})]}):(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(k.CreditCard,{className:"text-orange-600",size:32})}),(0,b.jsx)("h2",{className:"text-xl font-bold text-ink mb-2",children:"Connect with Stripe"}),(0,b.jsx)("p",{className:"text-muted mb-6 max-w-md mx-auto",children:"To receive payments, you'll need to connect a Stripe account. This takes about 5-10 minutes."}),(0,b.jsx)("button",{onClick:w,disabled:r,className:"btn-primary",children:r?(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Redirecting to Stripe..."]}):"Start Stripe Onboarding"})]})}),(0,b.jsxs)("div",{className:"card bg-blue-50 border-blue-200",children:[(0,b.jsx)("h3",{className:"font-semibold text-ink mb-3",children:"â„¹ï¸ About Stripe Connect"}),(0,b.jsxs)("div",{className:"space-y-2 text-sm text-muted",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"What is Stripe?"})," Stripe is a secure payment processor that handles all customer payments. You'll receive payments directly to your bank account."]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"How long does onboarding take?"})," About 5-10 minutes. You'll need your business details, bank account information, and a valid ID."]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"When do I get paid?"})," Payments are transferred to your bank account on a rolling 2-day basis after each successful delivery."]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Platform fee:"})," RideNDine takes a 15% platform fee on each order. You receive 85% of the order subtotal."]})]})]}),n&&(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h3",{className:"font-semibold text-ink mb-4",children:"Account Details"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-muted",children:"Account ID"}),(0,b.jsx)("span",{className:"font-mono text-sm text-ink",children:n.accountId})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-muted",children:"Onboarding Complete"}),(0,b.jsx)("span",{className:n.onboardingComplete?"text-green-600":"text-yellow-600",children:n.onboardingComplete?"âœ… Yes":"â³ In Progress"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-muted",children:"Charges Enabled"}),(0,b.jsx)("span",{className:n.chargesEnabled?"text-green-600":"text-red-600",children:n.chargesEnabled?"âœ… Yes":"âŒ No"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,b.jsx)("span",{className:"text-muted",children:"Payouts Enabled"}),(0,b.jsx)("span",{className:n.payoutsEnabled?"text-green-600":"text-red-600",children:n.payoutsEnabled?"âœ… Yes":"âŒ No"})]})]})]})]})}a.s(["default",()=>l],22479)}];

//# sourceMappingURL=apps_chef-dashboard_f6d0dc87._.js.map