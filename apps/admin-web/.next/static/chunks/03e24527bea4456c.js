(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37164,e=>{"use strict";let s=(0,e.i(77453).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>s],37164)},62380,e=>{"use strict";let s=(0,e.i(77453).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>s],62380)},53638,e=>{"use strict";let s=(0,e.i(77453).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>s],53638)},30800,e=>{"use strict";let s=(0,e.i(77453).default)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>s],30800)},91032,e=>{"use strict";let s=(0,e.i(77453).default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);e.s(["MessageSquare",()=>s],91032)},198,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(58888),l=e.i(46606),i=e.i(77453);let r=(0,i.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),d=(0,i.default)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),n=(0,i.default)("FlagOff",[["path",{d:"M8 2c3 0 5 2 8 2s4-1 4-1v11",key:"9rwyz9"}],["path",{d:"M4 22V4",key:"1plyxx"}],["path",{d:"M4 15s1-1 4-1 5 2 8 2",key:"1myooe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var c=e.i(47571),m=e.i(97389),x=e.i(53638),h=e.i(91032),o=e.i(37164),g=e.i(30800),v=e.i(62380);function u(){let[e,i]=(0,a.useState)([]),[u,f]=(0,a.useState)(!0),[p,j]=(0,a.useState)("all"),[w,y]=(0,a.useState)(!1),[N,b]=(0,a.useState)(""),[_,k]=(0,a.useState)(null),[R,C]=(0,a.useState)(""),[S,T]=(0,a.useState)(!1),[M,D]=(0,a.useState)(!1);(0,a.useEffect)(()=>{F()},[p,w]);let F=async()=>{f(!0);try{let e=await t.api.getReviews({type:"all"===p?void 0:p,flagged:w||void 0});i(e.reviews)}catch(e){console.error("Failed to fetch reviews:",e),i([{id:"1",order_id:"RND-2024-001234",reviewer_name:"John Doe",reviewee_type:"chef",reviewee_name:"Maria's Kitchen",rating:5,comment:"Amazing food! The pasta was perfectly cooked and the sauce was incredible. Will definitely order again!",is_flagged:!1,created_at:"2024-01-20T14:00:00Z"},{id:"2",order_id:"RND-2024-001235",reviewer_name:"Sarah Johnson",reviewee_type:"driver",reviewee_name:"David Chen",rating:4,comment:"Quick delivery, very professional. Food was still hot when it arrived.",is_flagged:!1,created_at:"2024-01-20T13:00:00Z"},{id:"3",order_id:"RND-2024-001236",reviewer_name:"Mike Wilson",reviewee_type:"chef",reviewee_name:"Chen's Dumplings",rating:2,comment:"Very disappointed. The order was wrong and when I tried to contact them they were rude.",is_flagged:!0,created_at:"2024-01-19T18:00:00Z"},{id:"4",order_id:"RND-2024-001237",reviewer_name:"Emily Brown",reviewee_type:"driver",reviewee_name:"Tom Wilson",rating:1,comment:"Driver was very late and food was cold. Terrible experience!",is_flagged:!0,created_at:"2024-01-19T16:00:00Z"},{id:"5",order_id:"RND-2024-001238",reviewer_name:"Alex Turner",reviewee_type:"chef",reviewee_name:"Soul Food by James",rating:5,comment:"Best fried chicken I have ever had! Absolutely amazing.",is_flagged:!1,created_at:"2024-01-18T12:00:00Z"}])}finally{f(!1)}},A=async()=>{if(_&&R){D(!0);try{await t.api.removeReview(_.id,R),T(!1),C(""),k(null),F()}catch(e){console.error("Failed to delete review:",e)}finally{D(!1)}}},z=async e=>{D(!0);try{e.is_flagged?await t.api.unflagReview(e.id):await t.api.flagReview(e.id),i(s=>s.map(s=>s.id===e.id?{...s,is_flagged:!s.is_flagged}:s))}catch(s){console.error("Failed to update flag status:",s),i(s=>s.map(s=>s.id===e.id?{...s,is_flagged:!s.is_flagged}:s))}finally{D(!1)}},L=e=>(0,s.jsx)("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(a=>(0,s.jsx)(l.Star,{className:`w-4 h-4 ${a<=e?"text-amber-400 fill-amber-400":"text-gray-300"}`},a))}),U=e.filter(e=>{if(!N)return!0;let s=N.toLowerCase();return e.reviewer_name.toLowerCase().includes(s)||e.reviewee_name.toLowerCase().includes(s)||e.comment.toLowerCase().includes(s)||e.order_id.toLowerCase().includes(s)}),V=U.length>0?U.reduce((e,s)=>e+s.rating,0)/U.length:0,Z=[5,4,3,2,1].map(e=>({rating:e,count:U.filter(s=>s.rating===e).length,percentage:U.length>0?U.filter(s=>s.rating===e).length/U.length*100:0}));return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-ink",children:"Review Management"}),(0,s.jsx)("p",{className:"text-muted text-sm",children:"Moderate and manage user reviews"})]}),(0,s.jsxs)("div",{className:"text-sm text-muted",children:[U.length," reviews"]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(v.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted"}),(0,s.jsx)("input",{type:"text",value:N,onChange:e=>b(e.target.value),placeholder:"Search reviews...",className:"input pl-10"})]}),(0,s.jsxs)("select",{value:p,onChange:e=>j(e.target.value),className:"input w-full sm:w-48",title:"Filter by review type","aria-label":"Filter by review type",children:[(0,s.jsx)("option",{value:"all",children:"All Reviews"}),(0,s.jsx)("option",{value:"chef",children:"Chef Reviews"}),(0,s.jsx)("option",{value:"driver",children:"Driver Reviews"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer bg-white border border-gray-200 rounded-xl px-4 py-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:w,onChange:e=>y(e.target.checked),className:"w-4 h-4 rounded accent-red-500"}),(0,s.jsx)(d,{className:"w-4 h-4 text-red-500"}),(0,s.jsx)("span",{className:"text-sm",children:"Flagged only"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Average Rating"}),(0,s.jsx)(l.Star,{className:"w-5 h-5 text-amber-400 fill-amber-400"})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,s.jsx)("span",{className:"text-4xl font-bold text-ink",children:V.toFixed(1)}),(0,s.jsx)("span",{className:"text-muted",children:"/ 5.0"})]}),(0,s.jsxs)("p",{className:"text-sm text-muted mt-2",children:["Based on ",U.length," reviews"]})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"font-semibold mb-4",children:"Rating Distribution"}),(0,s.jsx)("div",{className:"space-y-2",children:Z.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm w-8",children:e.rating}),(0,s.jsx)(l.Star,{className:"w-3 h-3 text-amber-400 fill-amber-400"}),(0,s.jsx)("div",{className:"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-amber-400 rounded-full transition-all",style:{width:`${e.percentage}%`}})}),(0,s.jsx)("span",{className:"text-xs text-muted w-8",children:e.count})]},e.rating))})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"font-semibold mb-4",children:"Review Stats"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.ChefHat,{className:"w-4 h-4 text-orange-500"}),(0,s.jsx)("span",{className:"text-sm",children:"Chef Reviews"})]}),(0,s.jsx)("span",{className:"font-semibold",children:U.filter(e=>"chef"===e.reviewee_type).length})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Truck,{className:"w-4 h-4 text-purple-500"}),(0,s.jsx)("span",{className:"text-sm",children:"Driver Reviews"})]}),(0,s.jsx)("span",{className:"font-semibold",children:U.filter(e=>"driver"===e.reviewee_type).length})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d,{className:"w-4 h-4 text-red-500"}),(0,s.jsx)("span",{className:"text-sm",children:"Flagged"})]}),(0,s.jsx)("span",{className:"font-semibold text-red-600",children:U.filter(e=>e.is_flagged).length})]})]})]})]}),(0,s.jsx)("div",{className:"card",children:u?(0,s.jsx)("div",{className:"text-center py-12 text-muted",children:"Loading..."}):0===U.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(h.MessageSquare,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),(0,s.jsx)("p",{className:"text-muted",children:"No reviews found"})]}):(0,s.jsx)("div",{className:"space-y-4",children:U.map(e=>(0,s.jsxs)("div",{className:`p-4 rounded-xl border ${e.is_flagged?"border-red-200 bg-red-50":"border-gray-100 bg-gray-50"}`,children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gray-200 flex items-center justify-center",children:(0,s.jsx)(x.User,{className:"w-5 h-5 text-gray-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-ink",children:e.reviewer_name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted",children:[(0,s.jsxs)("span",{children:["Order: ",e.order_id]}),(0,s.jsx)("span",{children:"-"}),(0,s.jsx)("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.is_flagged&&(0,s.jsxs)("span",{className:"badge badge-rejected flex items-center gap-1",children:[(0,s.jsx)(d,{className:"w-3 h-3"}),"Flagged"]}),(0,s.jsx)("button",{type:"button",onClick:()=>z(e),disabled:M,className:`p-2 rounded-lg transition-colors ${e.is_flagged?"hover:bg-emerald-100 text-emerald-600":"hover:bg-amber-100 text-amber-600"}`,title:e.is_flagged?"Unflag Review":"Flag Review",children:e.is_flagged?(0,s.jsx)(n,{className:"w-4 h-4"}):(0,s.jsx)(d,{className:"w-4 h-4"})}),(0,s.jsx)("button",{type:"button",onClick:()=>{k(e),T(!0)},className:"p-2 hover:bg-red-100 rounded-lg transition-colors",title:"Remove Review",children:(0,s.jsx)(r,{className:"w-4 h-4 text-red-600"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["chef"===e.reviewee_type?(0,s.jsx)(c.ChefHat,{className:"w-4 h-4 text-orange-500"}):(0,s.jsx)(m.Truck,{className:"w-4 h-4 text-purple-500"}),(0,s.jsx)("span",{className:"font-medium",children:e.reviewee_name})]}),L(e.rating),(0,s.jsxs)("span",{className:"text-sm text-muted",children:["(",e.rating,"/5)"]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-700",children:e.comment})]},e.id))})}),S&&_&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-red-100 flex items-center justify-center",children:(0,s.jsx)(g.AlertTriangle,{className:"w-5 h-5 text-red-600"})}),(0,s.jsx)("h3",{className:"text-lg font-bold text-ink",children:"Remove Review"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{T(!1),C(""),k(null)},className:"p-1 hover:bg-gray-100 rounded-lg",title:"Close modal","aria-label":"Close modal",children:(0,s.jsx)(o.X,{className:"w-5 h-5"})})]}),(0,s.jsx)("p",{className:"text-sm text-muted mb-4",children:"This review will be permanently removed and the reviewer will be notified."}),(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[L(_.rating),(0,s.jsxs)("span",{className:"text-sm text-muted",children:["by ",_.reviewer_name]})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["“",_.comment,"”"]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-ink mb-1",children:"Reason for removal"}),(0,s.jsx)("textarea",{value:R,onChange:e=>C(e.target.value),placeholder:"Enter the reason for removing this review...",rows:3,className:"input"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{T(!1),C(""),k(null)},className:"flex-1 btn-secondary",children:"Cancel"}),(0,s.jsxs)("button",{type:"button",onClick:A,disabled:!R||M,className:"flex-1 btn-danger flex items-center justify-center gap-2",children:[(0,s.jsx)(r,{className:"w-4 h-4"}),M?"Removing...":"Remove Review"]})]})]})})]})}e.s(["default",()=>u],198)}]);