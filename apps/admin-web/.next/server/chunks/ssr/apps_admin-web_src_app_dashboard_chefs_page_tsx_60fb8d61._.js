module.exports=[25301,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3112),e=a.i(34528),f=a.i(47589),g=a.i(96977),h=a.i(67482),i=a.i(62903),j=a.i(46129),k=a.i(26108),l=a.i(94940),m=a.i(69546),n=a.i(63142),o=a.i(33163);let p=(0,a.i(5770).default)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function q({message:a,type:d,onClose:e}){return(0,c.useEffect)(()=>{let a=setTimeout(e,3e3);return()=>clearTimeout(a)},[e]),(0,b.jsxs)("div",{className:`fixed bottom-4 right-4 z-50 px-4 py-3 rounded-xl shadow-lg flex items-center gap-2 animate-in slide-in-from-right ${"success"===d?"bg-emerald-500 text-white":"bg-red-500 text-white"}`,children:["success"===d?(0,b.jsx)(g.CheckCircle,{className:"w-5 h-5"}):(0,b.jsx)(h.XCircle,{className:"w-5 h-5"}),(0,b.jsx)("span",{children:a}),(0,b.jsx)("button",{onClick:e,className:"ml-2 hover:opacity-80",children:(0,b.jsx)(o.X,{className:"w-4 h-4"})})]})}function r(){let[a,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)("pending"),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(new Set),[G,H]=(0,c.useState)(new Set),[I,J]=(0,c.useState)(null),K=function(a,b){let[d,e]=(0,c.useState)(a);return(0,c.useEffect)(()=>{let b=setTimeout(()=>e(a),300);return()=>clearTimeout(b)},[a,300]),d}(w,0),L=(0,c.useCallback)((a,b)=>{J({message:a,type:b})},[]),M=(0,c.useCallback)((a,b)=>{F(c=>{let d=new Set(c);return b?d.add(a):d.delete(a),d})},[]),N=(0,c.useCallback)(async()=>{t(!0);try{let a=await d.api.getChefs({status:"all"===u?void 0:u,search:K||void 0});r(a.chefs)}catch(a){console.error("Failed to fetch chefs:",a),r([{id:"1",business_name:"Maria's Kitchen",user_email:"maria@example.com",user_phone:"+1 234-567-8900",address:"123 Main St, Hamilton, ON",cuisine_type:["Italian","Mediterranean"],rating:0,total_orders:0,verification_status:"pending",created_at:new Date().toISOString()},{id:"2",business_name:"Chen's Dumplings",user_email:"chen@example.com",user_phone:"+1 234-567-8901",address:"456 Oak Ave, Burlington, ON",cuisine_type:["Chinese","Asian"],rating:4.8,total_orders:156,verification_status:"approved",created_at:new Date().toISOString()}])}finally{t(!1)}},[u,K]);(0,c.useEffect)(()=>{N()},[N]);let O=(0,c.useCallback)(async a=>{M(a.id,!0);try{await d.api.approveChef(a.id),L(`${a.business_name} approved successfully`,"success"),N()}catch(a){console.error("Failed to approve chef:",a),L("Failed to approve chef","error")}finally{M(a.id,!1)}},[N,M,L]),P=(0,c.useCallback)(async()=>{if(y&&A){M(y.id,!0);try{await d.api.rejectChef(y.id,A),L(`${y.business_name} rejected`,"success"),D(!1),B(""),z(null),N()}catch(a){console.error("Failed to reject chef:",a),L("Failed to reject chef","error")}finally{y&&M(y.id,!1)}}},[y,A,N,M,L]),Q=(0,c.useCallback)(a=>{H(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},[]),R=(0,c.useMemo)(()=>{if(!w)return a;let b=w.toLowerCase();return a.filter(a=>a.business_name.toLowerCase().includes(b)||a.user_email.toLowerCase().includes(b)||a.address.toLowerCase().includes(b))},[a,w]),S=(0,c.useCallback)(()=>{H(a=>a.size===R.length?new Set:new Set(R.map(a=>a.id)))},[R]),T=(0,c.useCallback)(async()=>{if(0!==G.size&&confirm(`Approve ${G.size} chefs?`)){M("bulk",!0);try{await Promise.all(Array.from(G).map(a=>d.api.approveChef(a))),L(`${G.size} chefs approved`,"success"),H(new Set),N()}catch(a){console.error("Failed to bulk approve chefs:",a),L("Failed to approve some chefs","error")}finally{M("bulk",!1)}}},[G,N,M,L]),U=(0,c.useCallback)(async()=>{if(0===G.size)return;let a=prompt("Enter rejection reason:");if(a){M("bulk",!0);try{await Promise.all(Array.from(G).map(b=>d.api.rejectChef(b,a))),L(`${G.size} chefs rejected`,"success"),H(new Set),N()}catch(a){console.error("Failed to bulk reject chefs:",a),L("Failed to reject some chefs","error")}finally{M("bulk",!1)}}},[G,N,M,L]),V=(0,c.useMemo)(()=>({pending:a.filter(a=>"pending"===a.verification_status).length,approved:a.filter(a=>"approved"===a.verification_status).length,rejected:a.filter(a=>"rejected"===a.verification_status).length,total:a.length}),[a]),W=E.has("bulk"),X=G.size===R.length&&R.length>0;return(0,b.jsxs)("div",{className:"space-y-6",children:[I&&(0,b.jsx)(q,{message:I.message,type:I.type,onClose:()=>J(null)}),(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-ink",children:"Chef Management"}),(0,b.jsx)("p",{className:"text-muted text-sm",children:"Review applications and manage home chefs"})]})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted"}),(0,b.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value),placeholder:"Search by name, email, or address...",className:"input pl-10","aria-label":"Search chefs"})]}),(0,b.jsxs)("select",{value:u,onChange:a=>v(a.target.value),className:"input w-full sm:w-48","aria-label":"Filter by status",children:[(0,b.jsx)("option",{value:"all",children:"All Statuses"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"approved",children:"Approved"}),(0,b.jsx)("option",{value:"rejected",children:"Rejected"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)("div",{className:"card bg-amber-50 border-amber-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(n.AlertCircle,{className:"w-5 h-5 text-amber-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-amber-700",children:V.pending}),(0,b.jsx)("p",{className:"text-sm text-amber-600",children:"Pending Review"})]})]})}),(0,b.jsx)("div",{className:"card bg-emerald-50 border-emerald-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g.CheckCircle,{className:"w-5 h-5 text-emerald-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-emerald-700",children:V.approved}),(0,b.jsx)("p",{className:"text-sm text-emerald-600",children:"Approved"})]})]})}),(0,b.jsx)("div",{className:"card bg-red-50 border-red-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.XCircle,{className:"w-5 h-5 text-red-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-red-700",children:V.rejected}),(0,b.jsx)("p",{className:"text-sm text-red-600",children:"Rejected"})]})]})}),(0,b.jsx)("div",{className:"card",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e.ChefHat,{className:"w-5 h-5 text-muted"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-ink",children:V.total}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Total Chefs"})]})]})})]}),G.size>0&&(0,b.jsx)("div",{className:"card bg-blue-50 border-blue-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:X,onChange:S,className:"w-4 h-4 rounded accent-blue-500","aria-label":"Select all"}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[G.size," selected"]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:T,disabled:W,className:"btn-primary text-sm flex items-center gap-2",children:[W?(0,b.jsx)(p,{className:"w-4 h-4 animate-spin"}):null,"Approve Selected"]}),(0,b.jsxs)("button",{onClick:U,disabled:W,className:"btn-danger text-sm flex items-center gap-2",children:[W?(0,b.jsx)(p,{className:"w-4 h-4 animate-spin"}):null,"Reject Selected"]})]})]})}),(0,b.jsx)("div",{className:"card",children:s?(0,b.jsxs)("div",{className:"flex items-center justify-center py-12 text-muted gap-2",children:[(0,b.jsx)(p,{className:"w-5 h-5 animate-spin"}),(0,b.jsx)("span",{children:"Loading chefs..."})]}):0===R.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(e.ChefHat,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),(0,b.jsx)("p",{className:"text-muted",children:"No chefs found"})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-50",children:[(0,b.jsx)("th",{className:"table-header w-10",children:(0,b.jsx)("input",{type:"checkbox",checked:X,onChange:S,className:"w-4 h-4 rounded accent-blue-500","aria-label":"Select all chefs"})}),(0,b.jsx)("th",{className:"table-header",children:"Business"}),(0,b.jsx)("th",{className:"table-header",children:"Contact"}),(0,b.jsx)("th",{className:"table-header",children:"Location"}),(0,b.jsx)("th",{className:"table-header",children:"Cuisine"}),(0,b.jsx)("th",{className:"table-header",children:"Stats"}),(0,b.jsx)("th",{className:"table-header",children:"Status"}),(0,b.jsx)("th",{className:"table-header",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:R.map(a=>{let c=E.has(a.id);return(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsx)("input",{type:"checkbox",checked:G.has(a.id),onChange:()=>Q(a.id),className:"w-4 h-4 rounded accent-blue-500","aria-label":`Select ${a.business_name}`})}),(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-orange-100 flex items-center justify-center",children:(0,b.jsx)(e.ChefHat,{className:"w-5 h-5 text-orange-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-ink",children:a.business_name}),(0,b.jsxs)("p",{className:"text-xs text-muted",children:["Applied"," ",new Date(a.created_at).toLocaleDateString()]})]})]})}),(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted",children:[(0,b.jsx)(m.Mail,{className:"w-3 h-3"}),a.user_email]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted",children:[(0,b.jsx)(l.Phone,{className:"w-3 h-3"}),a.user_phone]})]})}),(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(j.MapPin,{className:"w-4 h-4 text-muted"}),a.address]})}),(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.cuisine_type.map(a=>(0,b.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 rounded text-xs",children:a},a))})}),(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(k.Star,{className:"w-4 h-4 text-amber-500"}),(0,b.jsx)("span",{className:"font-medium",children:a.rating.toFixed(1)})]}),(0,b.jsxs)("p",{className:"text-xs text-muted",children:[a.total_orders," orders"]})]})}),(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsx)("span",{className:`badge ${"approved"===a.verification_status?"badge-approved":"rejected"===a.verification_status?"badge-rejected":"badge-pending"}`,children:a.verification_status})}),(0,b.jsx)("td",{className:"table-cell",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details","aria-label":`View details for ${a.business_name}`,children:(0,b.jsx)(i.Eye,{className:"w-4 h-4 text-muted"})}),"pending"===a.verification_status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>O(a),disabled:c,className:"p-2 hover:bg-emerald-100 rounded-lg transition-colors disabled:opacity-50",title:"Approve","aria-label":`Approve ${a.business_name}`,children:c?(0,b.jsx)(p,{className:"w-4 h-4 text-emerald-600 animate-spin"}):(0,b.jsx)(g.CheckCircle,{className:"w-4 h-4 text-emerald-600"})}),(0,b.jsx)("button",{onClick:()=>{z(a),D(!0)},disabled:c,className:"p-2 hover:bg-red-100 rounded-lg transition-colors disabled:opacity-50",title:"Reject","aria-label":`Reject ${a.business_name}`,children:(0,b.jsx)(h.XCircle,{className:"w-4 h-4 text-red-600"})})]})]})})]},a.id)})})]})})}),C&&y&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"reject-modal-title",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{id:"reject-modal-title",className:"text-lg font-bold text-ink",children:"Reject Application"}),(0,b.jsx)("button",{onClick:()=>{D(!1),B("")},className:"p-1 hover:bg-gray-100 rounded-lg","aria-label":"Close modal",children:(0,b.jsx)(o.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("p",{className:"text-sm text-muted mb-4",children:["Rejecting application for"," ",(0,b.jsx)("span",{className:"font-medium text-ink",children:y.business_name})]}),(0,b.jsx)("textarea",{value:A,onChange:a=>B(a.target.value),placeholder:"Reason for rejection (will be sent to applicant)...",rows:4,className:"input mb-4","aria-label":"Rejection reason",autoFocus:!0}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>{D(!1),B("")},className:"flex-1 btn-secondary",children:"Cancel"}),(0,b.jsx)("button",{onClick:P,disabled:!A||E.has(y.id),className:"flex-1 btn-danger flex items-center justify-center gap-2",children:E.has(y.id)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p,{className:"w-4 h-4 animate-spin"}),"Rejecting..."]}):"Reject"})]})]})})]})}a.s(["default",()=>r],25301)}];

//# sourceMappingURL=apps_admin-web_src_app_dashboard_chefs_page_tsx_60fb8d61._.js.map