[["Add delivery address section\n- [ ] Add promo code input field\n- [ ] Improve tip selection UI (percentage-based)\n- [ ] Add order notes/special instructions\n- [ ] Add estimated delivery time display\n- [ ] Add save for later functionality\n\n##### 2. Delivery Address Input\n**Priority:** High  \n**Files to Create:**\n- `apps/customer-mobile/src/components/ui/AddressInput.tsx`\n- `apps/customer-mobile/src/components/ui/AddressCard.tsx`\n\n**Features:**\n- [ ] Use expo-location to get current location\n- [ ] Allow manual address entry\n- [ ] Address validation\n- [ ] Save address to user profile\n- [ ] Display saved addresses\n- [ ] Select from saved addresses\n- [ ] Add new address button\n\n**Implementation:**\n```typescript\n// AddressInput.tsx\ninterface AddressInputProps {\n  value: string;\n  onChange: (address: string) => void;\n  onUseCurrentLocation?: () => Promise<void>;\n  placeholder?: string;\n}\n\n// AddressCard.tsx\ninterface AddressCardProps {\n  address: Address;\n  isSelected?: boolean;\n  onSelect?: () => void;\n  onEdit?: () => void;\n  onDelete?: () => void;\n}\n```\n\n##### 3. Tip Selection UI Enhancement\n**Priority:** Medium  \n**File:** `apps/customer-mobile/src/components/ui/TipSelector.tsx`\n\n**Current State:** Fixed amounts ($0, $2, $3, $5)\n\n**Enhancements:**\n- [ ] Percentage-based tips (15%, 18%, 20%, 25%)\n- [ ] Custom tip amount input\n- [ ] Show tip percentage calculation\n- [ ] Show final total with tip\n- [ ] Visual feedback for selected tip\n\n**Implementation:**\n```typescript\ninterface TipSelectorProps {\n  subtotal: number;\n  selectedTip: number;\n  onTipChange: (tip: number) => void;\n  tipType: 'percentage' | 'fixed';\n}\n```\n\n##### 4. Promo Code Input\n**Priority:** Low  \n**File:** `apps/customer-mobile/src/components/ui/PromoCodeInput.tsx`\n\n**Features:**\n- [ ] Input field for promo code\n- [ ] Apply button\n- [ ] Validate with API (future endpoint)\n- [ ] Display discount amount\n- [ ] Show error message for invalid codes\n- [ ] Show success message for applied codes\n\n**Implementation:**\n```typescript\ninterface PromoCodeInputProps {\n  onApply: (code: string) => Promise<{ valid: boolean; discount?: number }>;\n  appliedCode?: string;\n  discount?: number;\n}\n```\n\n##### 5. Order Summary Display\n**Priority:** High  \n**File:** `apps/customer-mobile/src/components/order/OrderSummary.tsx`\n\n**Features:**\n- [ ] Review all items\n- [ ] Show breakdown of costs:\n  - Subtotal\n  - Delivery fee\n  - Service fee\n  - Tax\n  - Tip\n  - Promo discount\n  - Total\n- [ ] Show chef info\n- [ ] Show estimated delivery time\n- [ ] Show delivery address\n\n##### 6. Checkout Button Validation\n**Priority:** High  \n**File:** `apps/customer-mobile/src/screens/order/CartScreen.tsx`\n\n**Validation Rules:**\n- [ ] Cart not empty\n- [ ] Delivery address provided\n- [ ] Minimum order met\n- [ ] All items available\n- [ ] Chef is accepting orders\n\n**Success Criteria:**\n- [ ] Cart displays all items correctly\n- [ ] Can adjust quantities\n- [ ] Can remove items\n- [ ] Delivery address can be entered\n- [ ] Tip selection works\n- [ ] Total calculates correctly\n- [ ] Can proceed to checkout\n\n---\n\n### Day 6: Stripe Payment Integration\n\n**Duration:** 8-10 hours  \n**Status:** \u23f3 PENDING\n\n#### Tasks\n\n##### 1. Create Order Before Payment\n**Priority:** High  \n**File:** `apps/customer-mobile/src/services/api.ts`\n\n**API Call:**\n```typescript\nasync createOrder(orderData: CreateOrderRequest): Promise<CreateOrderResponse> {\n  const response = await this.post('/orders', orderData);\n  return response.data;\n}\n```\n\n**Order Data Structure:**\n```typescript\ninterface CreateOrderRequest {\n  chef_id: string;\n  items: {\n    menu_item_id: string;\n    quantity: number;\n    special_instructions?: string;\n  }[];\n  delivery_address: {\n    street: string;\n    city: string;\n    state: string;\n    zip: string;\n    latitude?: number;\n    longitude?: number;\n  };\n  tip_cents: number;\n  promo_code?: string;\n}\n```\n\n##### 2. Initialize Stripe Payment Sheet\n**Priority:** High  \n**File:** `apps/customer-mobile/src/hooks/useStripePayment.ts`\n\n**Implementation:**\n```typescript\nimport { useStripe, useElements } from '@stripe/stripe-react-native';\n\nexport const useStripePayment = () => {\n  const { initPaymentSheet, presentPaymentSheet } = useStripe();\n\n  const initializePaymentSheet = async ({\n    merchantDisplayName,\n    customerId,\n    customerEphemeralKeySecret,\n    paymentIntentClientSecret,\n    returnURL,\n  }: InitPaymentSheetParams) => {\n    const { error } = await initPaymentSheet({\n      merchantDisplayName,\n      customerId,\n      customerEphemeralKeySecret,\n      paymentIntentClientSecret,\n      allowsDelayedPaymentMethods: true,\n      returnURL,\n    });\n\n    if (error) {\n      throw new Error(error.message);\n    }\n  };\n\n  const presentPayment = async () => {\n    const { error } = await presentPaymentSheet();\n\n    if (error) {\n      throw new Error(error.message);\n    }\n\n    return { success: true };\n  };\n\n  return { initializePaymentSheet, presentPayment };\n};\n```\n\n##### 3. CheckoutScreen Implementation\n**Priority:** High  \n**File:** `apps/customer-mobile/src/screens/checkout/CheckoutScreen.tsx`\n\n**Features:**\n- [ ] Display order summary\n- [ ] Show delivery address\n- [ ] Show tip amount\n- [ ] Initialize Stripe Payment Sheet\n- [ ] Present payment sheet\n- [ ] Handle payment success\n- [ ] Handle payment error\n- [ ] Show loading state\n- [ ] Cancel order option\n\n**Flow:**\n1. User reviews order\n2. Tap \"Place Order", "button\n3. Create order via API\n4. Initialize Stripe Payment Sheet\n5. Present payment sheet\n6. User completes payment\n7. Navigate to order confirmation\n\n##### 4. PaymentScreen Implementation\n**Priority:** High  \n**File:** `apps/customer-mobile/src/screens/checkout/PaymentScreen.tsx`\n\n**Features:**\n- [ ] Display payment amount\n- [ ] Show payment methods\n- [ ] Add new payment method\n- [ ] Select payment method\n- [ ] Confirm payment\n\n##### 5. OrderConfirmationScreen Implementation\n**Priority:** High  \n**File:** `apps/customer-mobile/src/screens/order/OrderConfirmationScreen.tsx`\n\n**Features:**\n- [ ] Display order number\n- [ ] Show order summary\n- [ ] Show estimated delivery time\n- [ ] Link to order tracking\n- [ ] Option to view order details\n- [ ] Share order status\n- [ ] Contact support button\n- [ ] Continue shopping button\n\n**UI Components:**\n- Success animation\n- Order details card\n- Delivery timeline\n- Action buttons\n\n##### 6. Payment Error Handling\n**Priority:** High  \n**File:** `apps/customer-mobile/src/screens/checkout/CheckoutScreen.tsx`\n\n**Error Scenarios:**\n- [ ] Payment declined\n- [ ] Network error\n- [ ] Invalid payment method\n- [ ] Insufficient funds\n- [ ] Payment timeout\n\n**Error Handling:**\n- [ ] Show user-friendly error message\n- [ ] Retry payment option\n- [ ] Contact support option\n- [ ] Cancel order option\n- [ ] Log error for debugging\n\n##### 7. Configuration Required\n**Priority:** High  \n**File:** `apps/customer-mobile/app.json`\n\n**Add Stripe Plugin:**\n```json\n{\n  \"expo\": {\n    \"plugins\": [\n      [\n        \"@stripe/stripe-react-native", {"merchantIdentifier": "merchant.com.ridendine", "enableGooglePay": true}], ["Payment Sheet presents correctly\n- [ ] Payment succeeds with valid card\n- [ ] Payment fails with invalid card\n- [ ] Order confirmation shows after success\n- [ ] Order appears in backend\n- [ ] Error handling works correctly\n\n---\n\n### Day 7: Orders & Profile Screens\n\n**Duration:** 6-8 hours  \n**Status:** \u23f3 PENDING\n\n#### Tasks\n\n##### 1. OrdersScreen Enhancement\n**Priority:** High  \n**File:** `apps/customer-mobile/src/screens/order/OrdersScreen.tsx`\n\n**Current State:** Basic screen exists\n\n**Enhancements:**\n- [ ] Fetch `api.getOrders()`\n- [ ] Display order history\n- [ ] Filter by status:\n  - Pending\n  - Preparing\n  - Ready\n  - In Transit\n  - Delivered\n  - Cancelled\n- [ ] Sort by date (newest first)\n- [ ] Pull to refresh\n- [ ] Empty state\n- [ ] Loading state\n- [ ] Error state\n- [ ] Navigate to order detail\n\n**UI Components:**\n- Order card with:\n  - Order number\n  - Chef name\n  - Date\n  - Status\n  - Total\n  - Status icon\n\n##### 2. OrderDetailScreen Enhancement\n**Priority:** High  \n**File:** `apps/customer-mobile/src/screens/order/OrderDetailScreen.tsx`\n\n**Features:**\n- [ ] Fetch `api.getOrder(orderId)`\n- [ ] Display order details:\n  - Order number\n  - Status\n  - Date\n  - Chef info\n  - Items list\n  - Delivery address\n  - Payment summary\n- [ ] Show order timeline\n- [ ] Track driver location\n- [ ] Reorder functionality\n- [ ] Cancel order (if allowed)\n- [ ] Contact chef\n- [ ] Contact support\n\n**Order Timeline:**\n- Order placed\n- Payment confirmed\n- Chef accepted\n- Preparing\n- Ready for pickup\n- Driver assigned\n- Picked up\n- In transit\n- Delivered\n\n##### 3. OrderTrackingScreen Enhancement\n**Priority:** High  \n**File:** `apps/customer-mobile/src/screens/order/OrderTrackingScreen.tsx`\n\n**Features:**\n- [ ] Real-time map tracking\n- [ ] Driver location updates via WebSocket\n- [ ] ETA countdown\n- [ ] Status timeline\n- [ ] Driver info\n- [ ] Contact driver button\n- [ ] Share location button\n\n**WebSocket Events:**\n- `order:status_update` - Order state changes\n- `driver:location_update` - GPS position broadcast\n- `order:eta_update` - ETA recalculation\n\n**Map Features:**\n- Show chef location\n- Show driver location\n- Show delivery address\n- Show route\n- Update in real-time\n\n##### 4. ProfileScreen Enhancement\n**Priority:** Medium  \n**File:** `apps/customer-mobile/src/screens/profile/ProfileScreen.tsx`\n\n**Features:**\n- [ ] Display user info:\n  - Name\n  - Email\n  - Phone\n  - Profile picture\n- [ ] Edit profile functionality\n- [ ] Payment methods management\n- [ ] Addresses management\n- [ ] Order history link\n- [ ] Favorites link\n- [ ] Settings screen\n- [ ] Logout button\n\n**Profile Sections:**\n- Account info\n- Payment methods\n- Saved addresses\n- Favorite chefs\n- Order history\n- Settings\n- Help & support\n- About\n\n##### 5. SettingsScreen Implementation\n**Priority:** Medium  \n**File:** `apps/customer-mobile/src/screens/profile/SettingsScreen.tsx`\n\n**Features:**\n- [ ] Notification preferences\n- [ ] Location permissions\n- [ ] Language selection\n- [ ] Theme selection\n- [ ] Privacy policy\n- [ ] Terms of service\n- [ ] Delete account\n- [ ] Clear cache\n\n##### 6. Push Notification Setup\n**Priority:** Medium  \n**File:** `apps/customer-mobile/src/services/notifications.ts`\n\n**Features:**\n- [ ] Expo Push Notifications setup\n- [ ] Device token registration\n- [ ] Request permissions\n- [ ] Handle incoming notifications\n- [ ] Notification triggers:\n  - Order status updates\n  - Driver assigned\n  - Order delivered\n  - Promotions\n\n**Implementation:**\n```typescript\nimport * as Notifications from 'expo-notifications';\n\nexport const setupPushNotifications = async () => {\n  // Request permissions\n  const { status } = await Notifications.requestPermissionsAsync();\n  \n  if (status !== 'granted') {\n    return null;\n  }\n  \n  // Get token\n  const token = await Notifications.getExpoPushTokenAsync();\n  \n  // Register with backend\n  await api.registerDeviceToken(token.data);\n  \n  return token.data;\n};\n\nexport const addNotificationListener = () => {\n  Notifications.addNotificationReceivedListener(notification => {\n    // Handle notification\n  });\n  \n  Notifications.addNotificationResponseReceivedListener(response => {\n    // Handle notification tap\n  });\n};\n```\n\n##### 7. Address Management\n**Priority:** Medium  \n**File:** `apps/customer-mobile/src/screens/profile/AddressesScreen.tsx`\n\n**Features:**\n- [ ] List saved addresses\n- [ ] Add new address\n- [ ] Edit address\n- [ ] Delete address\n- [ ] Set default address\n- [ ] Validate address\n\n**Success Criteria:**\n- [ ] Orders screen displays order history\n- [ ] Can filter orders by status\n- [ ] Order detail shows complete information\n- [ ] Order tracking shows real-time updates\n- [ ] Profile screen displays user info\n- [ ] Can edit profile\n- [ ] Can manage addresses\n- [ ] Push notifications configured\n\n---\n\n## \ud83d\udcc1 Files to Create\n\n### Day 5\n```\napps/customer-mobile/src/components/ui/\n  AddressInput.tsx\n  AddressCard.tsx\n  TipSelector.tsx\n  PromoCodeInput.tsx\n\napps/customer-mobile/src/components/order/\n  OrderSummary.tsx\n\napps/customer-mobile/src/screens/order/\n  CartScreen.tsx (enhance existing)\n```\n\n### Day 6\n```\napps/customer-mobile/src/hooks/\n  useStripePayment.ts\n\napps/customer-mobile/src/screens/checkout/\n  CheckoutScreen.tsx\n  PaymentScreen.tsx\n\napps/customer-mobile/src/screens/order/\n  OrderConfirmationScreen.tsx\n\napps/customer-mobile/src/utils/\n  payment.ts\n```\n\n### Day 7\n```\napps/customer-mobile/src/screens/order/\n  OrdersScreen.tsx (enhance existing)\n  OrderDetailScreen.tsx (enhance existing)\n  OrderTrackingScreen.tsx (enhance existing)\n\napps/customer-mobile/src/screens/profile/\n  ProfileScreen.tsx (enhance existing)\n  SettingsScreen.tsx\n  AddressesScreen.tsx\n\napps/customer-mobile/src/services/\n  notifications.ts\n```\n\n---\n\n## \ud83d\udd27 Configuration Changes\n\n### app.json\n```json\n{\n  \"expo\": {\n    \"plugins\": [\n      [\n        \"@stripe/stripe-react-native", {"merchantIdentifier": "merchant.com.ridendine", "enableGooglePay": true}], {"infoPlist": {"NSLocationWhenInUseUsageDescription": "We need your location to find chefs near you and for delivery"}}, {"permissions": ["ACCESS_FINE_LOCATION", "ACCESS_COARSE_LOCATION"]}, ["Cart displays all items correctly\n- [ ] Can adjust item quantities\n- [ ] Can remove items from cart\n- [ ] Can clear entire cart\n- [ ] Tip selection works (percentage and fixed)\n- [ ] Total calculates correctly\n- [ ] Delivery address can be entered\n- [ ] Can use current location\n- [ ] Can save address\n- [ ] Can select from saved addresses\n- [ ] Promo code input works\n- [ ] Minimum order validation works\n- [ ] Checkout button enables/disables correctly\n\n### Day 6 Testing\n- [ ] Order creation works\n- [ ] Stripe Payment Sheet initializes\n- [ ] Payment Sheet presents correctly\n- [ ] Can complete payment with valid card\n- [ ] Payment fails with invalid card\n- [ ] Order confirmation shows after success\n- [ ] Order appears in backend\n- [ ] Error handling works for:\n  - Payment declined\n  - Network error\n  - Invalid payment method\n  - Insufficient funds\n  - Payment timeout\n- [ ] Can retry payment\n- [ ] Can cancel order\n- [ ] Can contact support\n\n### Day 7 Testing\n- [ ] Orders screen loads\n- [ ] Can view order history\n- [ ] Can filter orders by status\n- [ ] Can sort orders by date\n- [ ] Pull to refresh works\n- [ ] Can navigate to order detail\n- [ ] Order detail shows complete information\n- [ ] Order timeline displays correctly\n- [ ] Can track driver location\n- [ ] Real-time updates work\n- [ ] Can reorder from past orders\n- [ ] Profile screen loads\n- [ ] Can edit profile\n- [ ] Can manage addresses\n- [ ] Can access settings\n- [ ] Push notifications work\n- [ ] Can logout\n\n---\n\n## \ud83d\udcca Success Metrics\n\n### Completion Criteria\n- [ ] All Day 5 tasks complete\n- [ ] All Day 6 tasks complete\n- [ ] All Day 7 tasks complete\n- [ ] All tests passing\n- [ ] No critical bugs\n- [ ] Code reviewed\n\n### Performance Metrics\n- Cart screen loads in < 500ms\n- Payment sheet initializes in < 2s\n- Order confirmation displays in < 1s\n- Orders screen loads in < 500ms\n- Order detail loads in < 500ms\n- Real-time updates < 100ms latency\n\n### User Experience Metrics\n- Complete checkout flow in < 2 minutes\n- Payment success rate > 95%\n- Order tracking accuracy > 99%\n- Push notification delivery > 98%\n\n---\n\n## \ud83d\ude80 Next Steps\n\nAfter Phase 54 completion:\n1. **Phase 55**: Chef Dashboard Development (Week 9)\n2. **Phase 56**: Driver App Development (Week 10)\n3. **Phase 57**: Admin Panel Development (Week 11)\n4. **Phase 58**: Testing & Security (Weeks 13-14)\n5. **Phase 59**: Launch Preparation (Weeks 15-16)\n\n---\n\n## \ud83d\udcdd Notes\n\n### Known Issues\n- Stripe Payment Sheet requires physical device for testing\n- Push notifications require Expo app build\n- Real-time tracking requires WebSocket connection\n\n### Dependencies\n- Backend API must be running on port 8081\n- Stripe test account must be configured\n- Expo development server must be running\n\n### Risks\n- Stripe integration complexity\n- Real-time updates reliability\n- Payment error handling edge cases\n- Push notification delivery\n\n### Mitigation\n- Thorough testing on physical device\n- Comprehensive error handling\n- Fallback UI for failed payments\n- Retry logic for failed notifications\n\n---\n\n**Last Updated:** January 31, 2026  \n**Phase Owner:** Development Team  \n**Status:** READY TO START"]]