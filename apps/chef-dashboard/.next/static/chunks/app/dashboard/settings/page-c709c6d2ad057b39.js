(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{4089:function(e,t,s){Promise.resolve().then(s.bind(s,6938))},7461:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(4090),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),r=(e,t)=>{let s=(0,n.forwardRef)((s,r)=>{let{color:c="currentColor",size:l=24,strokeWidth:d=2,absoluteStrokeWidth:o,className:u="",children:m,...h}=s;return(0,n.createElement)("svg",{ref:r,...i,width:l,height:l,stroke:c,strokeWidth:o?24*Number(d)/Number(l):d,className:["lucide","lucide-".concat(a(e)),u].join(" "),...h},[...t.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(m)?m:[m]])});return s.displayName="".concat(e),s}},8998:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(7461).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9259:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(7461).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1708:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(7461).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},6938:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var n=s(3827),i=s(4090),a=s(8222),r=s(8958),c=s(3333),l=s(9259),d=s(8998),o=s(1708);let u=["American","Chinese","Indian","Italian","Japanese","Korean","Mexican","Thai","Vietnamese","Mediterranean","Caribbean","Soul Food","BBQ","Vegan","Other"];function m(){let{chef:e,setChef:t,user:s}=(0,r.t)(),[m,h]=(0,i.useState)({businessName:"",description:"",address:"",city:"",state:"",zipCode:"",cuisineTypes:[],minimumOrder:"",deliveryRadius:"",averagePrepTime:""}),[p,y]=(0,i.useState)(null),[g,x]=(0,i.useState)(!1),[f,b]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(e){var t,s;h({businessName:e.businessName||"",description:e.description||"",address:e.address||"",city:e.city||"",state:e.state||"",zipCode:e.zipCode||"",cuisineTypes:e.cuisineTypes||[],minimumOrder:(e.minimumOrder/100).toString()||"",deliveryRadius:(null===(t=e.deliveryRadius)||void 0===t?void 0:t.toString())||"",averagePrepTime:(null===(s=e.averagePrepTime)||void 0===s?void 0:s.toString())||""}),a.h.getStripeStatus(e.id).then(y).catch(()=>{})}},[e]);let v=e=>{h({...m,[e.target.name]:e.target.value})},N=e=>{let t=m.cuisineTypes.includes(e)?m.cuisineTypes.filter(t=>t!==e):[...m.cuisineTypes,e];h({...m,cuisineTypes:t})},j=async()=>{if(!m.businessName||!m.address||!m.city){c.default.error("Please fill in required fields");return}x(!0);try{if(e){let s=await a.h.updateChefProfile(e.id,{businessName:m.businessName,description:m.description,address:m.address,city:m.city,state:m.state,zipCode:m.zipCode,cuisineTypes:m.cuisineTypes,minimumOrder:Math.round(100*parseFloat(m.minimumOrder||"10")),deliveryRadius:parseInt(m.deliveryRadius||"10"),averagePrepTime:parseInt(m.averagePrepTime||"30")});t(s),c.default.success("Profile updated!")}else{let e=await a.h.applyAsChef({businessName:m.businessName,description:m.description,address:m.address,city:m.city,state:m.state,zipCode:m.zipCode,cuisineTypes:m.cuisineTypes,minimumOrder:Math.round(100*parseFloat(m.minimumOrder||"10")),deliveryRadius:parseInt(m.deliveryRadius||"10"),averagePrepTime:parseInt(m.averagePrepTime||"30"),lat:43.2207,lng:-79.7651});t(e),c.default.success("Chef profile created!")}}catch(e){c.default.error(e.message||"Failed to save")}finally{x(!1)}},k=async()=>{if(e){b(!0);try{let{url:t}=await a.h.getStripeOnboardingLink(e.id);window.open(t,"_blank")}catch(e){c.default.error(e.message||"Failed to start Stripe onboarding")}finally{b(!1)}}},C=async()=>{if(e)try{let s=await a.h.toggleVacationMode(e.id);t(s),c.default.success(s.isOnVacation?"Vacation mode enabled":"Vacation mode disabled")}catch(e){c.default.error(e.message||"Failed to toggle vacation mode")}};return(0,n.jsxs)("div",{className:"space-y-6 max-w-2xl",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-ink",children:"Settings"}),(0,n.jsx)("p",{className:"text-muted mt-1",children:"Manage your chef profile and preferences"})]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h2",{className:"text-lg font-bold text-ink mb-6",children:"Business Information"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"Business Name *"}),(0,n.jsx)("input",{type:"text",name:"businessName",className:"input",placeholder:"Chef John's Kitchen",value:m.businessName,onChange:v})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"Description"}),(0,n.jsx)("textarea",{name:"description",className:"input",rows:3,placeholder:"Tell customers about your cooking...",value:m.description,onChange:v})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"Address *"}),(0,n.jsx)("input",{type:"text",name:"address",className:"input",placeholder:"123 Main St",value:m.address,onChange:v})]}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"City *"}),(0,n.jsx)("input",{type:"text",name:"city",className:"input",placeholder:"Hamilton",value:m.city,onChange:v})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"State"}),(0,n.jsx)("input",{type:"text",name:"state",className:"input",placeholder:"ON",value:m.state,onChange:v})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"ZIP"}),(0,n.jsx)("input",{type:"text",name:"zipCode",className:"input",placeholder:"L8P 1A1",value:m.zipCode,onChange:v})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"Cuisine Types"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map(e=>(0,n.jsx)("button",{type:"button",onClick:()=>N(e),className:"px-3 py-1.5 rounded-full text-sm font-medium transition-colors ".concat(m.cuisineTypes.includes(e)?"bg-primary-500 text-white":"bg-gray-100 text-muted hover:bg-gray-200"),children:e},e))})]}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"Min Order ($)"}),(0,n.jsx)("input",{type:"number",name:"minimumOrder",className:"input",placeholder:"10",value:m.minimumOrder,onChange:v})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"Radius (mi)"}),(0,n.jsx)("input",{type:"number",name:"deliveryRadius",className:"input",placeholder:"10",value:m.deliveryRadius,onChange:v})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-ink mb-2",children:"Prep Time (min)"}),(0,n.jsx)("input",{type:"number",name:"averagePrepTime",className:"input",placeholder:"30",value:m.averagePrepTime,onChange:v})]})]})]}),(0,n.jsx)("button",{onClick:j,className:"btn-primary mt-6",disabled:g,children:g?"Saving...":"Save Changes"})]}),e&&(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h2",{className:"text-lg font-bold text-ink mb-4",children:"Payment Setup"}),(null==p?void 0:p.complete)?(0,n.jsxs)("div",{className:"flex items-center gap-3 text-green-600 bg-green-50 p-4 rounded-xl",children:[(0,n.jsx)(l.Z,{size:20}),(0,n.jsx)("span",{className:"font-medium",children:"Stripe Connect is set up and payouts are enabled"})]}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 text-orange-600 bg-orange-50 p-4 rounded-xl mb-4",children:[(0,n.jsx)(d.Z,{size:20}),(0,n.jsx)("span",{className:"font-medium",children:"Complete Stripe setup to receive payments"})]}),(0,n.jsxs)("button",{onClick:k,className:"btn-primary flex items-center gap-2",disabled:f,children:[f?"Loading...":"Set Up Stripe Connect",(0,n.jsx)(o.Z,{size:16})]})]})]}),e&&(0,n.jsx)("div",{className:"card",children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-bold text-ink",children:"Vacation Mode"}),(0,n.jsx)("p",{className:"text-sm text-muted mt-1",children:"Temporarily stop receiving orders"})]}),(0,n.jsx)("button",{onClick:C,className:"px-4 py-2 rounded-xl font-medium transition-colors ".concat(e.isOnVacation?"bg-green-100 text-green-700 hover:bg-green-200":"bg-orange-100 text-orange-700 hover:bg-orange-200"),children:e.isOnVacation?"Disable Vacation":"Enable Vacation"})]})})]})}},8222:function(e,t,s){"use strict";s.d(t,{h:function(){return i}});class n{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.getToken(),n={"Content-Type":"application/json",...t.headers};s&&(n.Authorization="Bearer ".concat(s));let i=await fetch("".concat(this.baseUrl).concat(e),{...t,headers:n}),a=await i.json();if(!i.ok)throw Error(a.message||"An error occurred");return a}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify({...e,role:"chef"})})}async getChefProfile(){return this.request("/chefs/me")}async applyAsChef(e){return this.request("/chefs/apply",{method:"POST",body:JSON.stringify(e)})}async updateChefProfile(e,t){return this.request("/chefs/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async toggleVacationMode(e){return this.request("/chefs/".concat(e,"/toggle-vacation-mode"),{method:"POST"})}async getStripeOnboardingLink(e){return this.request("/chefs/".concat(e,"/stripe/onboard"),{method:"POST"})}async getStripeStatus(e){return this.request("/chefs/".concat(e,"/stripe/status"))}async getMenus(e){return this.request("/chefs/".concat(e,"/menus"))}async createMenu(e,t){return this.request("/chefs/".concat(e,"/menus"),{method:"POST",body:JSON.stringify(t)})}async updateMenu(e,t){return this.request("/menus/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteMenu(e){return this.request("/menus/".concat(e),{method:"DELETE"})}async createMenuItem(e,t){return this.request("/menus/".concat(e,"/items"),{method:"POST",body:JSON.stringify(t)})}async updateMenuItem(e,t){return this.request("/menu-items/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteMenuItem(e){return this.request("/menu-items/".concat(e),{method:"DELETE"})}async getOrders(e){let t=(null==e?void 0:e.status)?"?status=".concat(e.status):"";return this.request("/orders".concat(t))}async getOrder(e){return this.request("/orders/".concat(e))}async acceptOrder(e,t){return this.request("/orders/".concat(e,"/accept"),{method:"PATCH",body:JSON.stringify({estimatedPrepTime:t})})}async rejectOrder(e,t){return this.request("/orders/".concat(e,"/reject"),{method:"PATCH",body:JSON.stringify({reason:t})})}async markOrderReady(e){return this.request("/orders/".concat(e,"/ready"),{method:"PATCH"})}async getEarnings(e){return this.request("/chefs/me/earnings".concat(e?"?period=".concat(e):""))}constructor(){this.baseUrl="".concat("http://localhost:9001","/api/").concat("v2"),this.getToken=()=>{{let t=localStorage.getItem("chef-auth-storage");if(t){var e;return(null===(e=JSON.parse(t).state)||void 0===e?void 0:e.accessToken)||null}}return null}}}let i=new n},8958:function(e,t,s){"use strict";s.d(t,{t:function(){return a}});var n=s(798),i=s(7305);let a=(0,n.Ue)()((0,i.tJ)(e=>({user:null,chef:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!0,setAuth:(t,s,n,i)=>e({user:t,chef:s,accessToken:n,refreshToken:i,isAuthenticated:!0,isLoading:!1}),setChef:t=>e({chef:t}),clearAuth:()=>e({user:null,chef:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!1}),setLoading:t=>e({isLoading:t})}),{name:"chef-auth-storage",onRehydrateStorage:()=>e=>{null==e||e.setLoading(!1)}}))}},function(e){e.O(0,[402,333,971,69,744],function(){return e(e.s=4089)}),_N_E=e.O()}]);